{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to BufDocs","text":"<p>Bufdir.no teamet sin dokumentasjons side</p>"},{"location":"#bufdirno","title":"Bufdir.no","text":""},{"location":"#project-layout","title":"Project layout","text":"<p>Project is consisting of all bufdir.no team services. </p>"},{"location":"test/","title":"Test","text":"<p>Test 123</p>","tags":["HTML5","JavaScript","CSS"]},{"location":"test/#1231231","title":"1231231","text":"","tags":["HTML5","JavaScript","CSS"]},{"location":"test/#1231231_1","title":"1231231","text":"<pre><code>   brew install azure-cli\n   az login\n</code></pre> <p>View on Eraser</p>","tags":["HTML5","JavaScript","CSS"]},{"location":"Bufdir.no/","title":"BufdirWeb","text":"<p>BufdirWeb is the solution containing the codebase for the web portal Bufdir.no - a site built with Optimizely and NextJs.</p>"},{"location":"Bufdir.no/#prerequisites","title":"Prerequisites","text":""},{"location":"Bufdir.no/#general","title":"General","text":"<ol> <li>Visual Studio/Code (optional)</li> <li>The .Net version used by the solution installed</li> <li>The NodeJS version used by the solution installed</li> <li> <p>Make sure you have the appropriate access rights for running the solution,    administered in Azure. This includes:</p> </li> <li> <p>Appropriate app role access in the solution's Azure AD Enterprise      application.</p> </li> <li>Access to the Azure SQL Server instance from your IP.</li> <li>Access to list/get values in the solution's Azure keyvault.</li> </ol> <p>Contact Bufdir's IT contact for appropriate access configuration in Azure.</p> <ol> <li>Log in to Azure from the terminal to recieve an authentication token:</li> </ol> <p>Windows:</p> <pre><code>choco install azure-cli\naz login\n</code></pre> <p>Mac:</p> <pre><code>brew install azure-cli\naz login\n</code></pre> <p>If your account is a member of multiple tenants, you can use the <code>--tenant</code>    flag to specify which tenant you want to log in to (fantomet). Read about    this flag    here.</p> <ol> <li>Copy <code>src/NextJs/.env.example</code> into a new file called <code>.env.local</code> in the    same location and fill in the secrets that you need (ask someone on your team    that has the solution running, or find them in Azure in the settings for the    container running the NextJs image).</li> </ol>"},{"location":"Bufdir.no/#getting-started","title":"Getting Started","text":""},{"location":"Bufdir.no/#general_1","title":"General","text":"<ol> <li>Build the solution (right click the \"Site\" project and click \"Build\" in    Visual Studio or <code>dotnet restore --interactive</code> and <code>dotnet build</code> in CLI)</li> <li>Run the site by using the menus in VS or Ctrl+F5 or <code>dotnet run</code> or    <code>dotnet watch</code></li> <li>In src/NextJs run <code>npm i</code>, then <code>npm run dev</code> or launch the Next.js debugger    in vscode (with bufdirno root opened in the IDE).</li> <li>Check that your Optimizely login works for your user (and that you have the    correct access rights in Azure) by going to the path    https://localhost:44320/EPiServer/Cms and checking that you can access    EPiServer edit mode after logging in.</li> <li>Check that your frontend is working on https://localhost:3000</li> </ol>"},{"location":"Bufdir.no/#pre-commit-actions","title":"Pre-commit-actions","text":""},{"location":"Bufdir.no/#backend-devs","title":"Backend Devs","text":"<p>Before pushing changes to the repo, please run and verify that all unit tests run successfully. If not, please fix these issues before pushing your changes.</p>"},{"location":"Bufdir.no/#frontend-devs","title":"Frontend Devs","text":"<p>Before pushing changes to the repo, please run and verify that all component tests run successfully (<code>npm test</code>). If not, please fix these issues before pushing your changes.</p>"},{"location":"Bufdir.no/#further-reading","title":"Further reading","text":"<p>See the docs under the folder ./docs to read up on how to do releases/deployments, best practices used in this project, etc.</p>"},{"location":"Bufdir.no/bufdir/","title":"Bufdir.no","text":"","tags":["Episerver","Skytjenester","C#","React"]},{"location":"Bufdir.no/changelog/","title":"Changelog","text":"<p>All notable changes to this project will be documented in this file.</p> <p>The format is based on Keep a Changelog and this project adheres to Semantic Versioning.</p> <p>See ./docs/release.md for release description. See README.md for release description.</p>"},{"location":"Bufdir.no/changelog/#unreleased-yyyy-mm-dd","title":"[Unreleased] - YYYY-MM-DD","text":""},{"location":"Bufdir.no/changelog/#fixed","title":"Fixed","text":"<ul> <li>Guideline search: show number of hits, even when search term has below 3 chars</li> <li>Guideline search: do not show separate hits for separate words in the same   search term</li> </ul>"},{"location":"Bufdir.no/changelog/#added","title":"Added","text":""},{"location":"Bufdir.no/changelog/#removed","title":"Removed","text":"<ul> <li>removed old views for pages which were used when optimizely was responsible for rendering pages</li> </ul>"},{"location":"Bufdir.no/changelog/#changed","title":"Changed","text":""},{"location":"Bufdir.no/changelog/#331-2024-10-21","title":"[3.3.1] - 2024-10-21","text":""},{"location":"Bufdir.no/changelog/#fixed_1","title":"Fixed","text":"<ul> <li>fix a bug in online library due to url change and possibly due to enabling   trailing slashes</li> </ul>"},{"location":"Bufdir.no/changelog/#330-2024-10-18","title":"[3.3.0] - 2024-10-18","text":""},{"location":"Bufdir.no/changelog/#added_1","title":"Added","text":"<ul> <li>guideline pages: added search hits per section</li> <li>added CSP Rules to allow Hotjar fonts and images</li> <li>added Feedback (Fant du det du lette etter?) to all statistics pages</li> </ul>"},{"location":"Bufdir.no/changelog/#changed_1","title":"Changed","text":"<ul> <li>changed trailing slash to be default because links from optimizely has it</li> </ul>"},{"location":"Bufdir.no/changelog/#320-2024-10-10","title":"[3.2.0] - 2024-10-10","text":""},{"location":"Bufdir.no/changelog/#fixed_2","title":"Fixed","text":"<ul> <li>fix simple address not redirecting to actual url</li> <li>fix pdf pages not displaying on transport page</li> <li>increase max upload file size to 140 MB</li> <li>guideline pages: drop side menu heading from focus order</li> <li>guideline pages: fix focus styling for side menu links</li> </ul>"},{"location":"Bufdir.no/changelog/#added_2","title":"Added","text":"<ul> <li>added Link styles in tinymce editor</li> <li>guideline pages: added search to side menu</li> <li>added subtext field to WelcomeBlock</li> </ul>"},{"location":"Bufdir.no/changelog/#removed_1","title":"Removed","text":"<ul> <li>removed media button from tinymce editor</li> <li>removed all code concerning youtube</li> </ul>"},{"location":"Bufdir.no/changelog/#changed_2","title":"Changed","text":"<ul> <li>running each page of bufdir_stat in dedicated Nextjs routes</li> <li>guideline pages: updated styling on side menu, using \"menu links\"</li> <li>TranportLink/WelcomeBlock: updated styling according to new design</li> <li>moved aria-live for child service results to h2</li> <li>updated buflib to v5 (new links and teasers)</li> <li>updated bufdir_stat to version 6 (better NextJs support and support for buflib   v5)</li> </ul>"},{"location":"Bufdir.no/changelog/#310-2024-09-02","title":"[3.1.0] - 2024-09-02","text":""},{"location":"Bufdir.no/changelog/#fixed_3","title":"Fixed","text":"<ul> <li>remove space under block if is rich-text followed by another rich-text block</li> <li>fixed html rendering without content (missing/lacking null checks)</li> <li>hide unused fields in guideline chapter page</li> <li>add icons and favico files - add link to manifest file</li> <li>fixed wss csp issue for hotjar</li> <li>Bug 42751: Veiledere: interne lenker er brutt</li> <li>fixed html rendering without content (missing/lacking null checks)</li> <li>add missing application insights key</li> <li>fixed bug where carousel was rendered even when images were missing</li> <li>add hotjar domain to csp</li> <li>upgrade node version of frontendcontainer to handle memory leak</li> <li>update license for qa and production</li> </ul>"},{"location":"Bufdir.no/changelog/#added_3","title":"Added","text":"<ul> <li>upgrades to veileder mal to handle rettsdata content</li> <li>add new fields to guideline section</li> </ul>"},{"location":"Bufdir.no/changelog/#301-2024-08-21","title":"[3.0.1] - 2024-08-21","text":""},{"location":"Bufdir.no/changelog/#fixed_4","title":"Fixed","text":"<ul> <li>Exception on imageblock when key is missing on dictionary</li> <li>Guidelinepager failing on external links</li> <li>Mediaflow - CSP error</li> </ul>"},{"location":"Bufdir.no/changelog/#added_4","title":"Added","text":"<ul> <li>Additional logging on CDA errors</li> </ul>"},{"location":"Bufdir.no/changelog/#300-2024-08-20","title":"[3.0.0] - 2024-08-20","text":""},{"location":"Bufdir.no/changelog/#fixed_5","title":"Fixed","text":"<ul> <li>Wrong number of search items shown in online library</li> <li>Changed survey result wording for take test again</li> </ul>"},{"location":"Bufdir.no/changelog/#42644-fix-barnevern-filter","title":"42644 - fix barnevern-filter","text":""},{"location":"Bufdir.no/changelog/#42186-add-print-button-to-focus-order","title":"42186 - add print button to focus order","text":""},{"location":"Bufdir.no/changelog/#added_5","title":"Added","text":"<ul> <li>Added title of current environment in the top bar in edit mode</li> <li>Added siteimprove script</li> </ul>"},{"location":"Bufdir.no/changelog/#removed_2","title":"Removed","text":"<ul> <li>Removed Bing Ads and Google Floodlight scripts</li> <li>Remove flag useSecondary from the Link List block (needs to be cleaned from db   manually via cms gui)</li> </ul>"},{"location":"Bufdir.no/changelog/#changed_3","title":"Changed","text":"<ul> <li>relase.md updated to new procedure</li> <li>Rewrote the frontend framework from ReactJs.NET to Next.js</li> <li>Making headers in yellow tile areas smaller.</li> <li>Slightly changed the design of the guideline page to be able to have alot   cleaner code.</li> </ul>"},{"location":"Bufdir.no/changelog/#2310-2024-02-05","title":"[2.31.0] - 2024-02-05","text":""},{"location":"Bufdir.no/changelog/#fixed_6","title":"Fixed","text":"<ul> <li>Prevent error box from blinking in document details for online library</li> </ul>"},{"location":"Bufdir.no/changelog/#2300-2024-02-01","title":"[2.30.0] - 2024-02-01","text":""},{"location":"Bufdir.no/changelog/#fixed_7","title":"Fixed","text":"<ul> <li>Wrong number of search items shown in online library</li> <li>guidelinechaptercontent error</li> <li>Fix Application Insights config bug</li> <li>Wrong error message displayed when document is not found in online library</li> </ul>"},{"location":"Bufdir.no/changelog/#added_6","title":"Added","text":"<ul> <li>Show only tagged/whitelisted documents from online library</li> <li>go to main content and main menu links</li> <li>logic for conditional rendering of small teaser</li> <li>forced teaserlist to be small</li> <li>Spacing to Guidline page</li> </ul>"},{"location":"Bufdir.no/changelog/#removed_3","title":"Removed","text":"<ul> <li>Remove Archive Page template/controller</li> </ul>"},{"location":"Bufdir.no/changelog/#changed_4","title":"Changed","text":"<ul> <li> <p>Disabled PermanentLinkKeeper Init code from Bufdir.SEO</p> </li> <li> <p>Updated buflib to 3.1.6</p> </li> </ul>"},{"location":"Bufdir.no/changelog/#2290-2023-01-15","title":"[2.29.0] - 2023-01-15","text":""},{"location":"Bufdir.no/changelog/#fixed_8","title":"Fixed","text":"<ul> <li>Wrong number of documents sometimes shown when using online library   pagination.</li> </ul>"},{"location":"Bufdir.no/changelog/#added_7","title":"Added","text":"<ul> <li>Online Library step 3 (document page, pagination)</li> <li>Redesigned Search page and zero hits</li> <li>Added tracking of search terms</li> <li>Added tracking to nettbibliotek search and clicks</li> <li>margin bottom to accordion list</li> </ul>"},{"location":"Bufdir.no/changelog/#changed_5","title":"Changed","text":"<ul> <li>Updated Buflib to 3.1.5</li> </ul>"},{"location":"Bufdir.no/changelog/#2280-2023-12-20","title":"[2.28.0] - 2023-12-20","text":""},{"location":"Bufdir.no/changelog/#fixed_9","title":"Fixed","text":"<ul> <li>Navigation issue caused by using relative routes instead of absolute routes in   nettbibliotek</li> <li>Fixed UU issues on foreldrestiltest</li> <li>Wrong number of documents sometimes shown when using online library   pagination.</li> </ul>"},{"location":"Bufdir.no/changelog/#added_8","title":"Added","text":"<ul> <li>Online Library step 3 (document page, pagination)</li> <li>Redesigned Search page and zero hits</li> <li>Added google site verification file</li> <li>Added tracking of search terms</li> <li>Added tracking to nettbibliotek search and clicks</li> </ul>"},{"location":"Bufdir.no/changelog/#changed_6","title":"Changed","text":"<ul> <li>Updated bufdir_stat to version 3.0.5</li> </ul>"},{"location":"Bufdir.no/changelog/#2270-2023-12-06","title":"[2.27.0] - 2023-12-06","text":""},{"location":"Bufdir.no/changelog/#fixed_10","title":"Fixed","text":"<ul> <li>Change how V8 engine is created to avoid cache issues</li> </ul>"},{"location":"Bufdir.no/changelog/#2260-2023-11-30","title":"[2.26.0] - 2023-11-30","text":""},{"location":"Bufdir.no/changelog/#fixed_11","title":"Fixed","text":"<ul> <li>Fixed issue with tabs in component props</li> </ul>"},{"location":"Bufdir.no/changelog/#changed_7","title":"Changed","text":"<ul> <li> <p>Replaced IMemoryCache with IObjectInstanceCache</p> </li> <li> <p>Updated buflib</p> </li> </ul>"},{"location":"Bufdir.no/changelog/#2250-2023-11-23","title":"[2.25.0] - 2023-11-23","text":""},{"location":"Bufdir.no/changelog/#fixed_12","title":"Fixed","text":"<ul> <li>made notfound handler available for all editors</li> </ul>"},{"location":"Bufdir.no/changelog/#added_9","title":"Added","text":"<ul> <li>Online Library with pseudo pagination (Step 2)</li> </ul>"},{"location":"Bufdir.no/changelog/#2240-2023-11-03","title":"[2.24.0] - 2023-11-03","text":""},{"location":"Bufdir.no/changelog/#fixed_13","title":"Fixed","text":"<ul> <li>Fixed bug with linklist block not supporting horizontal mode and hide arrows</li> <li>Upgraded to optimizely 12.23</li> <li>Updated License file for test</li> </ul>"},{"location":"Bufdir.no/changelog/#added_10","title":"Added","text":"<ul> <li>added functionality to preview blocks</li> <li>Added (dedicated) pagetype for contacting foster care offices</li> </ul>"},{"location":"Bufdir.no/changelog/#changed_8","title":"Changed","text":"<ul> <li>Start using new fosterhjem api in test environment</li> </ul>"},{"location":"Bufdir.no/changelog/#2230-2023-10-13","title":"[2.23.0] - 2023-10-13","text":""},{"location":"Bufdir.no/changelog/#fixed_14","title":"Fixed","text":"<ul> <li>Reconfigured Serilog to log to new seq-instance</li> <li>Changed how title is displayed for program block program items</li> <li>updated bufdir_stat to v3.0.2</li> <li>fixed issue where megamenu do not follow header on desktop</li> <li>fixed issue where user could scroll behind megamenu on mobile</li> <li>fixed event-sync-bug, pages now created with \"no\" culture as default</li> <li>contentLanguage added to get correct language on frontend-translations</li> <li>fixed bug with duplicate ids being generated in guideline pages</li> <li>fixed bug with best bets tab not showing in elasticsearch</li> <li>fixed sorting and title on continous meetings on officepage</li> <li>Reduce number of teaser views, and point all to the teaser react component   instead of having custom html for each</li> <li>Fixed bug where linklist title isn't in bold after adding support for teaser   text</li> <li>Fixed bug causing inability to scroll on megamenu on tablets</li> </ul>"},{"location":"Bufdir.no/changelog/#added_11","title":"Added","text":"<ul> <li>updated buflib to 3.0.2</li> <li>Added mapped role for elastic search addon editors</li> <li>Added block type for making seminar schedules</li> <li>updated bufdir_stat to 3.0.3</li> </ul>"},{"location":"Bufdir.no/changelog/#removed_4","title":"Removed","text":"<ul> <li>Removed unstyled list styles</li> <li>added support for displaying teasers in linklistblock</li> <li>Removed phone numbers from FostercareOfficePage and FamilyServicesOfficePage</li> <li>Deleted VideoTeaserListBlock from the code</li> </ul>"},{"location":"Bufdir.no/changelog/#changed_9","title":"Changed","text":"<ul> <li>Changed how tinymce applies bold to nested items</li> <li>Changed from h4 to p tag in eventsignup</li> <li>Changed Cookie settings to approve/reject all cookies.</li> </ul>"},{"location":"Bufdir.no/changelog/#2220-2023-09-25","title":"[2.22.0] - 2023-09-25","text":""},{"location":"Bufdir.no/changelog/#fixed_15","title":"Fixed","text":"<ul> <li>Added ingress for Foreldrest\u00f8ttede Tiltak</li> <li>Fixed bug where elasticsearch prevented deletion of blocks</li> <li>Fixed bug where unpublished pages showed in search results</li> <li>fixed bug where preview text returned was wrong in search results</li> <li>Fixed bug where image description and attribution on a local office article   started showing in listings due to Imageblock refactoring</li> <li>Fixed bug where image description on a local office article started showing in   listings due to Imageblock refactoring</li> <li>Sidemenu overflowing feedback</li> <li>ContentTeaser: Don't produce space (empty div) if no header is provided</li> </ul>"},{"location":"Bufdir.no/changelog/#added_12","title":"Added","text":"<ul> <li>Infobox for listing out field errors in ContactForm if more than one field is   invalid, else focus on the invalid field</li> <li>Added language button for tinymce</li> <li>Added support for mediaflow on seminar page and on video block</li> <li>Updated buflib and bufdir_stat packages to v3 and fix breaking changes</li> <li>Field errors list above form in ContactForm</li> <li>Added Bing Ads pixel script</li> <li>Added Google Floodlight pixel script</li> <li>Hotjar script is running only when all cookies are accepted</li> <li>Added Bing Ads pixel script (running when all cookies accepted)</li> <li>Added Google Floodlight pixel script (running when all cookies accepted)</li> <li>Added plugin for read-only viewing source code in tinymce</li> <li>Added context plugin for removing content language set using span tags in   tinymce.</li> <li>Added context plugin for removing content language set using span tags in   tinymce.</li> <li>Added global padding for bd-article__intro</li> </ul>"},{"location":"Bufdir.no/changelog/#changed_10","title":"Changed","text":"<ul> <li>Changed to aria-describedby on ServiceSearch</li> <li>Update License files because the previous ones are about to expire</li> <li>moved hr inside <li> element instead of as a child of <ul> in MenuItems <li>Header menu is now fixed</li> <li>Set position relative on footer wrapper</li> <li>Disable cookies on Application Insights</li> <li>Changed from bl-p-y-7 to bl-p-b-7 on NewsArticle wrapper</li> </ul>"},{"location":"Bufdir.no/changelog/#2210-2023-08-30","title":"[2.21.0] - 2023-08-30","text":""},{"location":"Bufdir.no/changelog/#fixed_16","title":"Fixed","text":"<ul> <li>Fixed bug with eventsignup checkbox</li> <li>Added ingress for Foreldrest\u00f8ttede Tiltak</li> <li>Fixed bug where elasticsearch prevented deletion of blocks</li> <li>Added span on accordion list for screen reader to read out loud on   AccordionList</li> <li>Fix bug that stopped backend validation from showing in context of the field   that failed</li> <li>Updated bufdir_stat package to get new accessability fixes</li> <li>Wrapped teaser titles in h2 tags</li> <li>Maximum-scale from 1 to 5</li> <li>Updated Buflib to 2.7.2</li> </ul>"},{"location":"Bufdir.no/changelog/#added_13","title":"Added","text":"<ul> <li>Added language button for tinymce</li> <li>Added tools unused blocks / images</li> <li>Css for making long words break with hyphens</li> <li>Added code to automiatcally set language code on links in footer if the links   seems to be to another language</li> <li>Added showing time for events, in listings for Fostercare, which are on the   same day.</li> </ul>"},{"location":"Bufdir.no/changelog/#changed_11","title":"Changed","text":"<ul> <li>Switched out formValidation for react-hook-form with zod</li> </ul>"},{"location":"Bufdir.no/changelog/#2200-2023-08-11","title":"[2.20.0] - 2023-08-11","text":""},{"location":"Bufdir.no/changelog/#fixed_17","title":"Fixed","text":"<ul> <li>Update EPiServer.CMS to v12.22.3</li> <li>Update buflib to v2.6.5 (accessability and styling fixes)</li> <li>Using Node v16 instead of v14 in azure pipeline</li> <li>Now running typescript check in npm build command</li> <li>Fixed structure for feedback analytics in Matomo</li> <li>Fixed test id attribute name for dropdowns</li> <li>PostalSearchModal: fixed bug where the modal would not open again after it had   been closed</li> <li>Removed pages which google cannot see from language stats module</li> <li>LinkList: set focus on the first of the new links when \"show more\" is clicked</li> <li>ChildServicesInstitutionList: set focus on the first of the new links when   \"show more\" is clicked</li> <li>InfoBox: remove header tag from title</li> <li>Feedback: set focus on the text input that appears when user clicks the   negative response button</li> <li>Fixed tab navigation for \"Go to main menu\" link</li> <li>Fixed tab focus for \"go to top\" button</li> <li>ServiceSearch: accessibility improvements</li> <li>Filters: accessibility improvements</li> <li>ChildServicesInstitutionList: Added aria-live=\"polite\" result section</li> <li>PostalSearchHandler: Added aria-live=\"polite\" result sections</li> <li>Removed h2 from search result title</li> <li>Changed div tags to h3 tags due to accessibility</li> <li>Changed div tags to aside for feedback due to accessibility</li> <li>Removed h tags from Accordion header elements</li> <li>Expiry date for cookie consent</li> <li>Not setting EpiStateMarker cookie anymore</li> </ul>"},{"location":"Bufdir.no/changelog/#added_14","title":"Added","text":"<ul> <li>Added SR/SEO Heading for front page</li> <li>Added heading to search page</li> <li>Added Hotjar script (explicitly)</li> <li>Added Matomo tracking event for foster care contact form submission</li> </ul>"},{"location":"Bufdir.no/changelog/#removed_5","title":"Removed","text":"<ul> <li>Deleted all code concerning Google Analytics and Google Tag Manager</li> </ul>"},{"location":"Bufdir.no/changelog/#changed_12","title":"Changed","text":"<ul> <li>Switched out Jest with Vitest for testing frontend components</li> </ul>"},{"location":"Bufdir.no/changelog/#2192-2023-06-28","title":"[2.19.2] - 2023-06-28","text":""},{"location":"Bufdir.no/changelog/#fixed_18","title":"Fixed","text":"<ul> <li>Removed H3-tag from consultation block since it messed with the heading   hierarchy which is bad for a11y</li> <li>FilterDropdowns: show title even if no results, and do not show warning when   result type is \"generic\"</li> <li>Newsletter signup - fixed styling for feedback on success and error</li> <li>Parental supported measures: Made filter and result titles editable in the cms</li> <li>Focus lock on menu</li> <li>update buflib to v2.5.0</li> </ul>"},{"location":"Bufdir.no/changelog/#added_15","title":"Added","text":"<ul> <li>Added Matomo tracking for signup, survey and feedback</li> <li>Added test-id attributes for testers on filterdropdown/multiselect</li> </ul>"},{"location":"Bufdir.no/changelog/#changed_13","title":"Changed","text":"<ul> <li>CSS word break and hyphens on list item</li> <li>aria-labels and nav elements in header</li> <li>replaced Modal with TileModal in EventSignup, PostalSearchModal, and added id   to modal in CookieSettings</li> </ul>"},{"location":"Bufdir.no/changelog/#removed_6","title":"Removed","text":""},{"location":"Bufdir.no/changelog/#2191-2023-06-22","title":"[2.19.1] - 2023-06-22","text":""},{"location":"Bufdir.no/changelog/#fixed_19","title":"Fixed","text":"<ul> <li>FilterDropowns: show title even if no results, and do not show warning when   result type is \"generic\"</li> <li>Newsletter signup - fixed styling for feedback on success and error</li> <li>Parental supported measures: Made filter and result titles editable in the cms</li> <li>update buflib to v2.5.0</li> </ul>"},{"location":"Bufdir.no/changelog/#2190-2023-06-19","title":"[2.19.0] - 2023-06-19","text":""},{"location":"Bufdir.no/changelog/#fixed_20","title":"Fixed","text":"<ul> <li>FilterDropdowns: Displaying how many options are selected in multi selects</li> <li>Footer: Refactored CookieSettings to use buflibs TileModal and put Footer and   CookieSettings together in react</li> <li>Updated bufdir_stat to v2.0.11</li> </ul>"},{"location":"Bufdir.no/changelog/#added_16","title":"Added","text":"<ul> <li>Added result title to new filter page</li> <li>Added flag to show pride logo with animation in start page site settings</li> <li>Added admin plugin for seeing stats about nynorsk usage</li> <li>Added Geta Not found handler</li> <li>Added property for tracking intent for call to action block</li> <li>Added selenium test id to filter dropdowns</li> </ul>"},{"location":"Bufdir.no/changelog/#2181-2023-06-13","title":"[2.18.1] - 2023-06-13","text":"<ul> <li>Update bufdir_stat from v2.0.4 to v2.0.10</li> </ul>"},{"location":"Bufdir.no/changelog/#2180-2023-06-07","title":"[2.18.0] - 2023-06-07","text":""},{"location":"Bufdir.no/changelog/#fixed_21","title":"Fixed","text":"<ul> <li>ServiceSearch: if only filters, make them take one third width each</li> <li>Removed role=tab from Table of contents component</li> <li>Fixed bug where it was possible to submit newsletter signup without valid   e-mail</li> <li>Updated to buflib v.2.2.0 (transparent accordion background, no vertical   centering in teasers)</li> <li>Removed all grid column centering (bl-grid--center)</li> <li>Changed font size of event signup location</li> <li>Fixed bug where alternate text was returned instead of attribution</li> <li>Fixed font size for event signup modal</li> <li>ServiceSearch: fixed the issue where all inputs appeared short</li> <li>Ordered accordion list: updated css class to get the correct style back</li> <li>Made reusable phone formatter (frontend) and used it for phone number in   PostalSearchModal and ChildServiceInstitutionCard</li> <li>Fixed instability in FilterDropdowns for better reusability</li> <li>Turn SSR back on for header, newsletter, sticky side menu (normerende) and   transport link</li> <li>Added support for multiselect in PostalSearchHandler/FilterDropdowns</li> </ul>"},{"location":"Bufdir.no/changelog/#added_17","title":"Added","text":"<ul> <li>Added property to all page types for marking content as Nynorsk (which sets   the language code in html tag)</li> <li>Added code for matomo tag manager and property to set the instance ID</li> <li>Added draft page templates for \"Foreldrest\u00f8ttede tiltak\"</li> </ul>"},{"location":"Bufdir.no/changelog/#changed_14","title":"Changed","text":"<ul> <li>Upgraded optimizely to 12.18</li> </ul>"},{"location":"Bufdir.no/changelog/#2170-2023-05-04","title":"[2.17.0] - 2023-05-04","text":""},{"location":"Bufdir.no/changelog/#fixed_22","title":"Fixed","text":"<ul> <li>Updated buflib and bufdir_stat packages to v2 and fix breaking changes</li> <li>Added block ID on sensible tags for link-list, accordion and accordion   collection so that top links might anchor link to them</li> <li>Child service institutions - open external institution links in new tab</li> <li>Child service institutions - style fixes</li> <li>Using bl-accordion-list__toggle styling from buflib instead of custom for   bufdir.no</li> <li>Ingress size 4 (not 3) for Article, NewsArticle, Process, InstitutionOverview,   FosterCareEventList, SeminarList, and OfficeList</li> <li>Update buflib (Carousel full screen position fixes and color fixes for warning   validations)</li> <li>Site locked at bottom scroll position if cookie settings pops up</li> </ul>"},{"location":"Bufdir.no/changelog/#added_18","title":"Added","text":"<ul> <li>Added custom breadcrumbs for bufdir_stat in header</li> <li>Added support for retrieving alt text, description, attribution from   underlying image file if it is not provided in the image block</li> </ul>"},{"location":"Bufdir.no/changelog/#2162-2023-04-20","title":"[2.16.2] - 2023-04-20","text":""},{"location":"Bufdir.no/changelog/#fixed_23","title":"Fixed","text":"<ul> <li>bufdir_stat: Added slash to base-url prop</li> </ul>"},{"location":"Bufdir.no/changelog/#2161-2023-04-20","title":"[2.16.1] - 2023-04-20","text":""},{"location":"Bufdir.no/changelog/#fixed_24","title":"Fixed","text":"<ul> <li>Updated bufdir_stat to v2</li> </ul>"},{"location":"Bufdir.no/changelog/#2160-2023-04-18","title":"[2.16.0] - 2023-04-18","text":""},{"location":"Bufdir.no/changelog/#fixed_25","title":"Fixed","text":"<ul> <li>fixed issue with single image in carousel</li> <li>Fixed accordion print overlay issue</li> <li>Updated buflib to v2 alpha and fixed breaking changes</li> <li>Modal UU fixes (tabbing, body disable scroll when open, focus on open)</li> <li>Removed internal text link appearing when printing pages logged in as an</li> <li>removed internal text link appearing when printing pages logged in as an   editor</li> </ul>"},{"location":"Bufdir.no/changelog/#added_19","title":"Added","text":"<ul> <li>Added support for marking courses as full in family services</li> </ul>"},{"location":"Bufdir.no/changelog/#removed_7","title":"Removed","text":""},{"location":"Bufdir.no/changelog/#changed_15","title":"Changed","text":""},{"location":"Bufdir.no/changelog/#2150-yyyy-mm-dd","title":"[2.15.0] - YYYY-MM-DD","text":""},{"location":"Bufdir.no/changelog/#fixed_26","title":"Fixed","text":"<ul> <li>Fixed icon spacing</li> <li>Fixed missing colons on child service institutions</li> <li>Fixed possible bug when in edit mode with xhtml string fields</li> <li>fixed bug where alt text wasn't showing in page teaser</li> <li>Fixed bug where adding seminar page failed if call to action link text wasn't   provided</li> <li>Fixed bug where footer was partly in english</li> <li>Hotfixed sort order not considering norwegian sorting on child service   institutions</li> </ul>"},{"location":"Bufdir.no/changelog/#added_20","title":"Added","text":"<ul> <li>Added field for family service events which do not have end date</li> <li>Added support for always displaying sign up button for courses which are   continous</li> <li>Added frontend-support for second required name field in ContactForm,   EventSignup and PostalSearchModal</li> <li>Hide cookie consent box in edit mode</li> <li>Added max length to CTA button text</li> <li>Added support for specifying individual course signup e-mail recipient on   family services</li> <li> <p>added support for two attendeed on family service course</p> </li> <li> <p>Added field for family service events which do not have end date</p> </li> <li>Added support for always displaying sign up button for courses which are   continous</li> <li>Hide cookie consent box in edit mode</li> <li>Added max length to CTA button text</li> <li>Added support for specifying individual course signup e-mail recipient on   family services</li> <li>added support for two attendeed on family service course</li> <li>Added page type for parent child centers</li> </ul>"},{"location":"Bufdir.no/changelog/#removed_8","title":"Removed","text":"<ul> <li>Added support for always displaying sign up button for courses which are   continuous</li> </ul>"},{"location":"Bufdir.no/changelog/#changed_16","title":"Changed","text":"<ul> <li>Made field for start time of seminars required</li> <li>Changed the way family service events are filtered</li> <li>Changed the way simple addresses are handled - now redirecting to real address</li> <li>Changed upload size limit to 40 megabyte</li> <li>Changed the way family service events are filtered</li> </ul>"},{"location":"Bufdir.no/changelog/#2140-2023-02-21","title":"[2.14.0] - 2023-02-21","text":""},{"location":"Bufdir.no/changelog/#2140-2023-03-10","title":"[2.14.0] - 2023-03-10","text":""},{"location":"Bufdir.no/changelog/#fixed_27","title":"Fixed","text":"<ul> <li>Hotfixed a bug for xhtml string fields</li> <li>Fixed frontend test warning about missing window.scrollTo function</li> <li>Upgraded storybook to v7.0.0-beta.40</li> <li>Switched out Webpack for Vite when building Storybook</li> <li>Switched out esbuild for Vite when building bundles</li> <li>Upgraded optimizely to 12.15</li> <li>Fixed check for empty array. If array was empty \"0\" was rendered</li> <li>Fix logo not linking to correct startpage for current language</li> <li>Fix ordering of institutions</li> </ul>"},{"location":"Bufdir.no/changelog/#added_21","title":"Added","text":"<ul> <li>Added alt text and description fields for imagefile</li> <li>Added functionaly for automatically adding language specific alt texts On   images in xhtmlstring</li> </ul>"},{"location":"Bufdir.no/changelog/#added_22","title":"Added","text":"<ul> <li>Added alt text and description fields for imagefile</li> <li>(Removed again in hotfix) Added functionaly for automatically adding language   specific alt texts On images in xhtmlstring</li> </ul>"},{"location":"Bufdir.no/changelog/#changed_17","title":"Changed","text":"<ul> <li>Changed the way robots/crawlers are blocked, now for all envs except   production</li> <li>Changed the way carousel images retrieve alt text, attribution and description</li> </ul>"},{"location":"Bufdir.no/changelog/#2130-2023-02-02","title":"[2.13.0] - 2023-02-02","text":""},{"location":"Bufdir.no/changelog/#fixed_28","title":"Fixed","text":"<ul> <li>Added checks for undefined on \"toLowercase\" function in case value was null</li> <li>Possible to enter \"other information\" for the short description of an   institution.</li> <li>Header for the short discription of institution should not be visible if no   info added.</li> <li>Phone and E-mail in Institutions are clickable</li> <li>Article lists should not show image description.</li> <li>Remove empty structured data script tag because google crawler complains</li> <li> <p>Fixed that all last accordions in a list get a spacing bottom class.</p> </li> <li> <p>Better handling of cases in header and footer when content has not been added   to various properties</p> </li> <li>Re-enabled feedback export for authenticated users and added menu item to   optimizely admin panel. Implemented \"permissions to functions\" for granular   access management.</li> </ul>"},{"location":"Bufdir.no/changelog/#added_23","title":"Added","text":"<ul> <li>Added newsletter block</li> <li>Support for validating recaptcha tokens before passing requests to internal   resources.</li> </ul>"},{"location":"Bufdir.no/changelog/#removed_9","title":"Removed","text":"<ul> <li>Misc old cruft</li> </ul>"},{"location":"Bufdir.no/changelog/#changed_18","title":"Changed","text":"<ul> <li>Change how the back to start page link is created in bread crumb</li> <li>made several properties on the start page unique per language to support   localization</li> <li>Updated reCaptcha keys</li> <li>Updated bufdir configuration to Options pattern</li> <li>Rewrote foster care events and zip codes to use internal resources so the   configuration could be further streamlined.</li> </ul>"},{"location":"Bufdir.no/changelog/#2120-2023-01-13","title":"[2.12.0] - 2023-01-13","text":""},{"location":"Bufdir.no/changelog/#fixed_29","title":"Fixed","text":"<ul> <li>Phone and E-mail in Institutions are clickable</li> <li>Month names aren't capitalized in event dates</li> <li>Scrolling user up to contact submit success message after submit</li> <li>Institutions now shows contact info even if only address info is set</li> <li>Removed punctuation after day in foster care event listing.</li> <li>Updated bufdir_stat package from 1.1.9 to v1.1.11.</li> <li>Updated Statistics.ApiUrl to https://statistikk.bufdir.no in the production   app settings.</li> </ul>"},{"location":"Bufdir.no/changelog/#removed_10","title":"Removed","text":"<ul> <li><code>Infrastructure/InternalResources</code> was replaced with nuget package and   necessary adjustments made.</li> </ul>"},{"location":"Bufdir.no/changelog/#changed_19","title":"Changed","text":"<ul> <li>Family services course registrations now contains more information.</li> <li>Hero block has a different logic for determining when it should be visible</li> </ul>"},{"location":"Bufdir.no/changelog/#added_24","title":"Added","text":"<ul> <li> <p>Service start page has mainintro field</p> </li> <li> <p>Added teaser info to seminar, foster care office and family services office   pages</p> </li> <li>Added teaser info, main intro, main body, bottom content and adjusted styling   on seminar list page</li> <li>Added main intro to foster care office and event list page</li> </ul>"},{"location":"Bufdir.no/changelog/#2110-2022-12-07","title":"[2.11.0] - 2022-12-07","text":""},{"location":"Bufdir.no/changelog/#fixed_30","title":"Fixed","text":"<ul> <li>Updated bufdir_stat package from 1.1.7 to v1.1.9.</li> </ul>"},{"location":"Bufdir.no/changelog/#added_25","title":"Added","text":"<ul> <li>Statistics page type for Statistics root page</li> <li>Model for Statistics subpages</li> <li>Partial routing to Statistics subpages</li> <li>temporary endpoint for editors to see how blocks are used</li> <li>Teaser image - when provided is used as an open graph image</li> </ul>"},{"location":"Bufdir.no/changelog/#removed_11","title":"Removed","text":"<ul> <li>Removed existing controller routing to statistics pages</li> </ul>"},{"location":"Bufdir.no/changelog/#2101-2022-11-24","title":"[2.10.1] - 2022-11-24","text":""},{"location":"Bufdir.no/changelog/#fixed_31","title":"Fixed","text":"<ul> <li>Bug causing bufdir logo to appear on private institution</li> </ul>"},{"location":"Bufdir.no/changelog/#2100-2022-11-04","title":"[2.10.0] - 2022-11-04","text":""},{"location":"Bufdir.no/changelog/#fixed_32","title":"Fixed","text":"<ul> <li>Added a markdown file with notes for releasing and   deploying this project.</li> <li>Updated bufdir_stat package from 1.1.6 to v1.1.7.</li> <li>Added qa and prod api urls for bufdir_stat in the appsettings.</li> <li>Updated the license for test.</li> <li>Events would not show in listing before they were finished.</li> <li>[Hotfix] 404 handling improved in application insights</li> </ul>"},{"location":"Bufdir.no/changelog/#added_26","title":"Added","text":"<ul> <li>Add logic to hide several page types from external search engines, yet keep   them visible for internal search engine.</li> </ul>"},{"location":"Bufdir.no/changelog/#292-2022-10-20","title":"[2.9.2] - 2022-10-20","text":""},{"location":"Bufdir.no/changelog/#fixed_33","title":"Fixed","text":"<ul> <li>Seminars are shown until seminar end time on listing page</li> <li>Seminar end time is shown properly on seminar page</li> </ul>"},{"location":"Bufdir.no/changelog/#291-2022-09-26","title":"[2.9.1] - 2022-09-26","text":""},{"location":"Bufdir.no/changelog/#fixed_34","title":"Fixed","text":"<ul> <li>Routing logo and breadcrumb start to relative root, instead of www.bufdir.no</li> </ul>"},{"location":"Bufdir.no/changelog/#290-2022-09-23","title":"[2.9.0] - 2022-09-23","text":""},{"location":"Bufdir.no/changelog/#fixed_35","title":"Fixed","text":"<ul> <li>Accidental container classes within container classes will not produce extra   space on the sides (buflib).</li> </ul>"},{"location":"Bufdir.no/changelog/#added_27","title":"Added","text":"<ul> <li>Image counter for Carousel component (buflib).</li> </ul>"},{"location":"Bufdir.no/changelog/#280-2022-09-","title":"[2.8.0] - 2022-09-?","text":"<p>Missing changelog documentation...</p>"},{"location":"Bufdir.no/changelog/#270-2022-08-22","title":"[2.7.0] - 2022-08-22","text":""},{"location":"Bufdir.no/changelog/#fixed_36","title":"Fixed","text":"<ul> <li>Foster care: changes on meetings and courses lists</li> <li>Api/frontend communication: fixed validation messages from backend</li> </ul>"},{"location":"Bufdir.no/changelog/#added_28","title":"Added","text":"<ul> <li>Buflib carousel for use in Razor</li> <li>Institution page</li> <li>Contact forms: More options for editors</li> </ul>"},{"location":"Bufdir.no/changelog/#262-2022-08-15","title":"[2.6.2] - 2022-08-15","text":""},{"location":"Bufdir.no/changelog/#fixed_37","title":"Fixed","text":"<ul> <li>Fixed response handling in Postal Search Route frontend component</li> </ul>"},{"location":"Bufdir.no/changelog/#261-2022-08-10","title":"[2.6.1] - 2022-08-10","text":""},{"location":"Bufdir.no/changelog/#fixed_38","title":"Fixed","text":"<ul> <li>Fixed limit on (FosterCare)EventListBlock</li> </ul>"},{"location":"Bufdir.no/changelog/#260-2022-08-10","title":"[2.6.0] - 2022-08-10","text":""},{"location":"Bufdir.no/changelog/#fixed_39","title":"Fixed","text":"<ul> <li>Updated most frontend packages [^1] (not react or packages that needs react   v18 to update).</li> <li>Style fix for SurveryResultPageIndex: added the required buflib prefix for the   wysiwyg css class in survery result body content.</li> <li>Fixed links on search results for guideline pages. They now point to the root   chapter instead of an anchor-link to the specific guideline as requested.</li> </ul> <p>[^1]</p> Package From To bufdir_stat 1.1.5 1.1.6 bulma 0.9.3 0.9.4 babel/core 7.17.7 7.18.9 babel/preset-react 7.16.7 7.18.6 types/jest 27.4.1 28.1.6 concurrently 7.0.0 7.3.0 core-js 3.21.1 3.24.1 dotenv 16.0.0 16.0.1 esbuild 0.14.27 0.14.51 esbuild-sass-plugin 2.2.5 2.3.1 eslint 8.11.0 8.21.0 eslint-plugin-mdx 1.16.0 2.0.2 eslint-plugin-storybook 0.5.12 0.6.1 jest 28.1.0 28.1.3 jest-environment-jsdom 28.1.0 28.1.3 msw 0.39.2 0.44.2 prettier 2.6.0 2.7.1 sass 1.49.9 1.54.0 sass-loader 12.6.0 13.0.2 ts-jest 28.0.2 28.0.7 typescript 4.6.2 4.7.4"},{"location":"Bufdir.no/changelog/#added_29","title":"Added","text":"<ul> <li>Added InternalResources segment to appsettings.json QA and Prod</li> <li>Configged up feedbackAPI for both qa and prod</li> <li>Added episerver.labs.gridview package for demo/testing purposes</li> <li>Made it possible for editor to overwrite the default text on the survery   result page read more button</li> </ul>"},{"location":"Bufdir.no/changelog/#changed_20","title":"Changed","text":"<ul> <li>Changed approach to generating preview text for search results. Instead of   hard-coding the search order for each page type, we derive the order from the   [Display]-attribute on earch field to approximate the first occurrence of the   search term for the end user.</li> </ul>"},{"location":"Bufdir.no/changelog/#250-2022-06-27","title":"[2.5.0] - 2022-06-27","text":""},{"location":"Bufdir.no/changelog/#fixed_40","title":"Fixed","text":"<ul> <li>Possibility for adding multiple FactBox blocks on the front page.</li> <li>Style fixes.</li> <li>Bug fix for lists with filter url parameters.</li> </ul>"},{"location":"Bufdir.no/changelog/#added_30","title":"Added","text":"<ul> <li>Variants of Factbox block.</li> <li>Automatic archive functionality.</li> <li>Frontend tests</li> </ul>"},{"location":"Bufdir.no/changelog/#changed_21","title":"Changed","text":"<ul> <li>Removed \"place\" from digital meetings in the gui.</li> </ul>"},{"location":"Bufdir.no/changelog/#241-2022-06-07","title":"[2.4.1] - 2022-06-07","text":""},{"location":"Bufdir.no/changelog/#fixed_41","title":"Fixed","text":"<ul> <li>Dotnet 6.0 upgrade on main solution</li> </ul>"},{"location":"Bufdir.no/changelog/#added_31","title":"Added","text":"<ul> <li>new page template for news list</li> <li>new page template for news articles</li> <li>logic for auto-archiving and tagging old/expired news articles</li> </ul>"},{"location":"Bufdir.no/changelog/#240-2022-05-31","title":"[2.4.0] - 2022-05-31","text":""},{"location":"Bufdir.no/changelog/#fixed_42","title":"Fixed","text":"<ul> <li>Visual bugfixes</li> <li>Better naming for page templates</li> </ul>"},{"location":"Bufdir.no/changelog/#added_32","title":"Added","text":"<ul> <li>New page templates: Kurs og konferanser</li> <li>Component test for ContactForm component</li> <li>Set up page template with react component for Statistics pages</li> </ul>"},{"location":"Bufdir.no/changelog/#removed_12","title":"Removed","text":"<ul> <li>Removed some old blocks from migration of normative</li> </ul>"},{"location":"Bufdir.no/changelog/#231-2022-05-20","title":"[2.3.1] - 2022-05-20","text":""},{"location":"Bufdir.no/changelog/#fixed_43","title":"Fixed","text":"<ul> <li>Cleaned up json serialization settings to a single place to ensure consistent   camel case serialization behavior.</li> </ul>"},{"location":"Bufdir.no/changelog/#210-2022-03-28","title":"[2.1.0] - 2022-03-28","text":""},{"location":"Bufdir.no/changelog/#fixed_44","title":"Fixed","text":"<ul> <li>Role access in episerver</li> <li>Missing tabs in episerver</li> <li>Frontend spacing issues</li> <li>Transformations</li> <li>Search fixes</li> </ul>"},{"location":"Bufdir.no/changelog/#added_33","title":"Added","text":"<ul> <li>Feedback component and cms options for displaying it on pages (frontend   commented out for this release, since api backend is not 100%)</li> <li>Call to Action block</li> </ul>"},{"location":"Bufdir.no/changelog/#200-2022-03-21","title":"[2.0.0] - 2022-03-21","text":""},{"location":"Bufdir.no/changelog/#fixed_45","title":"Fixed","text":"<ul> <li>Style fixes</li> <li>Spacing fixes</li> <li>Loads and loads of code smell fixes</li> <li>UU fixes</li> <li>Refactor CSS for smaller payload</li> </ul>"},{"location":"Bufdir.no/changelog/#added_34","title":"Added","text":"<ul> <li>New Front End build for production</li> <li>Migrated normative content (Normerende)</li> <li>Teaser list 3 columns</li> <li>Added tests for solution</li> </ul>"},{"location":"Bufdir.no/changelog/#removed_13","title":"Removed","text":"<ul> <li>Removed old styleguide</li> </ul>"},{"location":"Bufdir.no/changelog/#changed_22","title":"Changed","text":"<ul> <li>Upgraded backend to dotnet 5.0</li> <li>Upgraded CMS to new version</li> <li>Lots of changes to Elastic Search implementation</li> <li>Moved away from Epinova module, now custom implementation.</li> </ul>"},{"location":"Bufdir.no/changelog/#131-2022-02-dd","title":"[1.3.1] - 2022-02-DD","text":""},{"location":"Bufdir.no/changelog/#fixed_46","title":"Fixed","text":"<ul> <li>Added hook to tinymce to remove rogue div tags</li> </ul>"},{"location":"Bufdir.no/changelog/#130-2022-02-dd","title":"[1.3.0] - 2022-02-DD","text":""},{"location":"Bufdir.no/changelog/#fixed_47","title":"Fixed","text":"<ul> <li>Hero block was too wide when no image was added</li> <li>Removed source field from fact box block</li> <li>New episerver role \"Publisist\"</li> </ul>"},{"location":"Bufdir.no/changelog/#121-2022-01-27","title":"[1.2.1] - 2022-01-27","text":""},{"location":"Bufdir.no/changelog/#fixed_48","title":"Fixed","text":"<ul> <li>Icons in solution now shows again</li> <li>Copy paste in blocks</li> </ul>"},{"location":"Bufdir.no/changelog/#added_35","title":"Added","text":"<ul> <li>Migrations of \"Normerende\" area</li> </ul>"},{"location":"Bufdir.no/changelog/#114-2022-01-15-hotfix","title":"[1.1.4] - 2022-01-15 - Hotfix","text":""},{"location":"Bufdir.no/changelog/#fixed_49","title":"Fixed","text":"<ul> <li>Listing title on \"Kurs\" pages</li> </ul>"},{"location":"Bufdir.no/changelog/#added_36","title":"Added","text":"<ul> <li>New role group, \"Publisist\"</li> </ul>"},{"location":"Bufdir.no/changelog/#113-2022-01-11","title":"[1.1.3] - 2022-01-11","text":""},{"location":"Bufdir.no/changelog/#fixed_50","title":"Fixed","text":"<ul> <li>Tests</li> <li>manifest.json</li> <li>config settings elastic QA</li> </ul>"},{"location":"Bufdir.no/changelog/#added_37","title":"Added","text":"<ul> <li>Teaser block</li> <li>Content Teaser</li> <li>Word-break: initial on tables</li> </ul>"},{"location":"Bufdir.no/changelog/#removed_14","title":"Removed","text":"<ul> <li>Errorvault</li> <li>Developertools</li> </ul>"},{"location":"Bufdir.no/changelog/#changed_23","title":"Changed","text":"<ul> <li>Accordion</li> <li>Console warnings, duplicate keys</li> <li>Tests</li> <li>Logic for isvisible</li> </ul>"},{"location":"Bufdir.no/changelog/#112-2021-12-15","title":"[1.1.2] - 2021-12-15","text":"<ul> <li>Fosterhjem stuff made generally reusable</li> <li>Responsive images fixes</li> <li>Fosterhjem URL on meetings</li> <li>Refactoring ajax calls</li> <li>Recaptcha v3</li> <li>favicons and SEO</li> <li>More deployment pipeline fixes</li> <li>Search fixed, elastic running.</li> </ul>"},{"location":"Bufdir.no/changelog/#111-2021-12-07","title":"[1.1.1] - 2021-12-07","text":""},{"location":"Bufdir.no/changelog/#fixed_51","title":"Fixed","text":"<ul> <li>Fixed tracking of contact forms not working.</li> </ul>"},{"location":"Bufdir.no/changelog/#110-2021-12-01","title":"[1.1.0] -2021-12-01","text":"<ul> <li>Major pipeline changes</li> <li>Config changes to KV secrets</li> <li>ES6 building frontend</li> <li>Npm cache</li> <li>Structure reformatting in frontend</li> <li>Oslo integration</li> <li>\"Fant du det du lette etter\" started</li> <li>Foreldrestiltest page</li> <li>RTE features turned on</li> </ul>"},{"location":"Bufdir.no/changelog/#103-2021-11-19","title":"[1.0.3] - 2021-11-19","text":"<ul> <li>Technical YELL</li> <li>Bugfixes</li> <li>Fosterhjem release bugs</li> <li>Authentication to API</li> <li>GTM changes</li> <li>Package management</li> <li>Front End unit tests</li> <li>Backend unit tests</li> <li>Cards block</li> <li>Fosterhjem.API changes</li> </ul>"},{"location":"Bufdir.no/changelog/#102-2021-11-01","title":"[1.0.2] - 2021-11-01","text":"<ul> <li>Sprint 39 changes</li> <li>gui fixes based on design feedback on live fosterhjem</li> <li>technical dept</li> <li>xhtml string to accordiancontentblock</li> <li>Table overflow fix</li> <li>Change event location to \"Digitalt\" or \"Fysisk()\" depending on event   type <li>Support for embeded video in main body</li>"},{"location":"Bufdir.no/changelog/#101-2021-10-25","title":"[1.0.1] - 2021-10-25","text":"<ul> <li>Hot fixes kurs page</li> </ul>"},{"location":"Bufdir.no/changelog/#added_38","title":"Added","text":""},{"location":"Bufdir.no/changelog/#100-2021-10-21","title":"[1.0.0] - 2021-10-21","text":""},{"location":"Bufdir.no/changelog/#added_39","title":"Added","text":"<ul> <li>Fostercare section (fosterhjem)</li> <li>Product section (normerende produkter)</li> </ul>"},{"location":"Bufdir.no/changelog/#unreleased-yyyy-mm-dd_1","title":"[Unreleased] - YYYY-MM-DD","text":""},{"location":"Bufdir.no/changelog/#fixed_52","title":"Fixed","text":""},{"location":"Bufdir.no/changelog/#added_40","title":"Added","text":""},{"location":"Bufdir.no/changelog/#removed_15","title":"Removed","text":""},{"location":"Bufdir.no/changelog/#changed_24","title":"Changed","text":""},{"location":"Bufdir.no/pull_request_template/","title":"Pull request template","text":""},{"location":"Bufdir.no/pull_request_template/#pull-request-checklist","title":"Pull request checklist","text":"<p>Before you create this pull request, please make sure these steps have been verified</p> <ul> <li> Changelog has been updated</li> <li> Code has been run locally without failure since last commit</li> <li> Tests has been run locally without failure since last commit</li> </ul>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/","title":"RSC status p\u00e5 komponenter i Bufdir-next","text":"<p>Per 16.02.24</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#breadcrumbs","title":"Breadcrumbs","text":"<p>RSC</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#calltoaction","title":"CallToAction","text":"<p>RSC</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#carousel","title":"Carousel","text":"<p>CC Dette er en wrapper rundt BlCarousel/BlResponsiveImage Wrapperen er CC, men trenger nok ikke v\u00e6re det</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#childservicesinstitutioncard","title":"ChildServicesInstitutionCard","text":"<p>RSC (men blir til CC via Result, som ikke trenger \u00e5 v\u00e6re CC)</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#child-services-filter","title":"child-services &gt; Filter","text":"<p>CC og m\u00e5 v\u00e6re det, fordi state m\u00e5 holdes gjennom hele l\u00f8pet.</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#child-services-results","title":"child-services &gt; Results","text":"<p>CC Denne er CC, men kan nok blir RSC ved \u00e5 gj\u00f8re knappen som er der om til en CC, og la resten v\u00e6re RSC</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#childservicesinstitutionlist","title":"ChildServicesInstitutionList","text":"<p>RSC Ser ikke ut til \u00e5 v\u00e6re i bruk. Skal nok inn via noen manglende maler?</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#contactform","title":"ContactForm","text":"<p>CC Har masse interaksjon og state, s\u00e5 m\u00e5 v\u00e6re det</p> <p>Se p\u00e5 om vi skal refaktorere det som bruker ContactForm, og splitte den ut av det som bruker det</p> <ul> <li>EventSignup</li> <li>PostalSearchModal</li> </ul>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#contentteaser","title":"ContentTeaser","text":"<p>RSC</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#cookiesettings","title":"CookieSettings","text":"<p>CC Er CC pga at Footer er parent, men er ikke markert med \"use client\". Burde bli det</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#eventlist","title":"EventList","text":"<p>RSC Blir CC n\u00e5r den blir brukt i OfficeEventOverview, PostalSearchHandler og PostalSearchModal</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#eventlisttile","title":"EventListTile","text":"<p>RSC Blir kun brukt i Components.tsx</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#eventsignup","title":"EventSignup","text":"<p>CC Knapp og modal kunne flyttes til egen komponent som er CC, mens resten kan v\u00e6re RSC</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#feedback","title":"Feedback","text":"<p>CC M\u00e5 v\u00e6re det pga skjema og ting som skjer runtime</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#filterdropdown","title":"FilterDropdown","text":"<p>CC M\u00e5 v\u00e6re det for alt skjer runtime i den Note: <code>updateUrlParameters</code>, <code>getDefaultOptionIds</code> og <code>overridePropDefaultsWithUrlDefaults</code> kan kanskje skrives om til \u00e5 bruke next router?</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#footer","title":"Footer","text":"<p>CC. Er CC kun pga knapp for \u00e5 \u00e5pne og <code>CookieSettings</code> og pga <code>CookieSettings</code>. Kanskje splitte disse ut og gj\u00f8re <code>Footer</code> til RSC</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#header","title":"Header","text":"<p>CC Kunne ha splitta ut det som er i megamenyen og \u00e5pnet for \u00e5 dytte det inn som <code>children</code> til <code>Header</code> i <code>Layout</code> Note: <code>Localizations</code> komponenten ligger i <code>Header</code> sin mappe, men blir brukt kun i <code>Layout</code>. Kanskje flytte denne?</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#hero","title":"Hero","text":"<p>RSC Blir bare brukt i page templates, som ogs\u00e5 er RSC</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#icon","title":"Icon*","text":"<p>RSC 7 stk</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#infobox","title":"InfoBox","text":"<p>RSC Blir brukt i <code>SearchResults</code>, som er CC Ellers brukt i ting som er RSC</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#linklist","title":"LinkList","text":"<p>CC Er CC pga client side pagination som viser flere ved klikk Kan vurdere om vi skal ha <code>LinkList</code> som er statisk, <code>LinkListClientPagination</code> som er CC og <code>LinkListPagination</code> som er CC. Se om <code>LinkList</code> er mye i bruk uten pagination, i s\u00e5 fall lag en egen for disse.</p> <p>Komponenter som bruker LinkList som ikke bruker pagination</p> <ul> <li>OfficeLinkList</li> <li>ParentSupportedmeasureList</li> </ul>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#linklistpagination","title":"LinkListPagination","text":"<p>CC Er CC fordi den m\u00e5 reagere p\u00e5 at links propen endrer seg i en <code>useEffect</code>.</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#loader","title":"Loader","text":"<p>CC SVG only</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#logobufdir","title":"LogoBufdir","text":"<p>CC SVG only</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#logobufdirpride","title":"LogoBufdirPride","text":"<p>CC SVG only</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#logobufetat","title":"LogoBufetat","text":"<p>CC SVG only</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#mediaflowvideo","title":"MediaFlowVideo","text":"<p>CC M\u00e5 v\u00e6re CC pga script som loades runtime</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#newsletter","title":"NewsLetter","text":"<p>CC M\u00e5 v\u00e6re det pga skjema med validering</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#noticeblock","title":"NoticeBlock","text":"<p>RSC Blir kun brukt i page templates Er bare en wrapper rundt InfoBox, kunne kanskje brukt InfoBox direkte heller</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#officelinklist","title":"OfficeLinkList","text":"<p>RSC Statisk liste med lenker, men bruker LinkList som er CC (LinkList hadde ikke trengt \u00e5 v\u00e6re CC her pga ingen pagination)</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#officeeventoverview","title":"OfficeEventOverview","text":"<p>CC, men kan skrives om til RSC. Eneste som er brukt av hooks er for \u00e5 gj\u00f8re 2 fetch kall. Husk \u00e5 buste cashen i et gitt intervall for disse kallene i RSC</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#onlinelibrary","title":"OnlineLibrary","text":"<p>CC M\u00e5 nok v\u00e6re det siden ingenting synes (nesten) f\u00f8r man har trigget et s\u00f8k client side</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#optimizelycommunicationscript","title":"OptimizelyCommunicationScript","text":"<p>CC M\u00e5 v\u00e6re det fordi den kj\u00f8rer et script client side</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#parentsupportmeasureoverview","title":"ParentSupportMeasureOverview","text":"<p>Utkommenter - sp\u00f8r Paal, kan nok slettes. Paal har laget ny page template Mappa inneholder en MainBody som kun sender html til dangerouslySetInnerHTML - her burde vi nok fjerne denne, og bruke RichText (eller kanskje XHtmlstring, fordi det er et content area sin verdi som sendes inn til Mainbody) direkte</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#delete","title":"delete","text":""},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#postalsearchhandler","title":"PostalSearchHandler","text":"<p>CC M\u00e5 sannsynligvis v\u00e6re CC pga s\u00f8k/filtrering som trigger henting av diverse lenkelister</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#postalsearchmodal","title":"PostalSearchModal","text":"<p>CC M\u00e5 kanskje v\u00e6re CC pga isOpen state + fetchData som skjer basert p\u00e5 postnr-s\u00f8k</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#postalsearchroute","title":"PostalSearchRoute","text":"<p>CC M\u00e5 v\u00e6re CC fordi den kun inneholder s\u00f8k (ServiceSearch) som sender deg til ny side runtime. Note: bruker <code>window.location.href</code>, men burde bruke noe NextJs router ting her</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#postalsearchroutezero","title":"PostalSearchRouteZero","text":"<p>RSC Er ikke i bruk, kan nok fjernes</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#printbuttonlink","title":"PrintButtonLink","text":"<p>CC hadde nok ikke trengt \u00e5 v\u00e6re det er en <code>&lt;a&gt;</code> tag, burde v\u00e6re <code>&lt;Link&gt;</code> component, med to wrapper divvs og et icon</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#recaptcha","title":"Recaptcha","text":"<p>Ikke markert som CC, men burde kanskje v\u00e6re det? brukes kun i Feedback, som er CC</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#responsiveimage","title":"ResponsiveImage","text":"<p>RSC Bruker credit og caption fra <code>&lt;BlResponsiveImage&gt;</code> og sender bildet videre til NextJs sin <code>&lt;Image&gt;</code> komponent.</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#richtext","title":"RichText","text":"<p>RSC Parser r\u00e5 html til jsx</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#search","title":"Search","text":"<p>CC Burde bruke ServiceSearch?</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#servicesearch","title":"ServiceSearch","text":"<p>Kun PostalSearchHandler som bruker filterSettings, s\u00e5 kanskje splitte FilterDropdowns ut av ServiceSearch og bruke direkte i PostalSearchHandler? (M\u00e5 refaktorere slik at dem kan v\u00e6re p\u00e5 linje uten \u00e5 v\u00e6re i samme komponent)</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#statapp","title":"StatApp","text":"<p>RSC Men egentlig ikke fordi vi bruker <code>hydrateRoot</code> for \u00e5 sette inn <code>bufdir_stat</code> Ikke i bruk, <code>bufdir_stat</code> lastes direkte inn i egen page template</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#delete_1","title":"delete","text":""},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#statbreadcrumbs","title":"StatBreadCrumbs","text":"<p>CC Bruker <code>window.addEventListener</code> for \u00e5 kommunisere med <code>bufdir_stat</code> Mounted i <code>TemplateWrapper</code> hvis <code>isStat</code></p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#survey","title":"Survey","text":"<p>CC Alternativ1: Kunne ha laget <code>SurverQuestions</code> som egen page med dynamisk route <code>id</code> Alternativ2: kunne kommunisert <code>mostReccuring</code> fra <code>SurverQuestions</code> via callback prop opp til <code>Survey</code> og kj\u00f8rt <code>finishTest</code> der. Uansett: <code>finishTest</code> burde brukt <code>useRouter</code> i stedet for <code>window.location.href</code></p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#tableofcontentguideline","title":"TableOfContentGuideline","text":"<p>CC Kunne nok f\u00e5tt inn <code>MenuInfo</code> og <code>MenuItems</code> som children/props i <code>Guideline</code> page templaten, slik at de kunne v\u00e6rt RSC. De er direkte importert i <code>TableContentMenu</code> i dag</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#transportlink","title":"TransportLink","text":"<p>RSC Bruker <code>Link</code> fra NextJs</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#validationmessage","title":"ValidationMessage","text":"<p>RSC Gjenskaper <code>BlValidation</code>, ser ikke ut til \u00e5 v\u00e6re i bruk</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#delete_2","title":"delete","text":""},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#xhtmlstring","title":"XHtmlString","text":"<p>RSC</p>"},{"location":"Bufdir.no/docs/RSC-status-feb-2024/#xhtmlstring-components","title":"XHtmlString &gt; Components","text":"<p>RSC</p>"},{"location":"Bufdir.no/docs/Reindex/","title":"Reindex dokumentasjon","text":"<p>OBS: Denne er XML versjonen av API. Pr 08.11.2023 er dette det vi har \u00e5 forholde oss til, men det er bedt om et rest api med json isteden fra reindex.</p> <p>Reindex har kun sendt et .txt document med dokumentasjon.</p>","tags":["Ekstern","API","Reindex"]},{"location":"Bufdir.no/docs/Reindex/#references","title":"References","text":"<p>Authentication No authentication is used - open access.</p> <p>endpoint : https://nbbf.reindex.net/BUF/rss/rxsearch.php</p> <p>parameter \"command\" - record : return specific record. Must use parameter \"id\" from localnumber in field 001 - termlist : return list of facet terms. Must use parameter \"query\" for search terms - search : return resultset. Must use parameter \"query\" for search terms.  Parameter \"num\" and parameter \"start\" is used for paging.</p>","tags":["Ekstern","API","Reindex"]},{"location":"Bufdir.no/docs/Reindex/#examples","title":"Examples","text":"<p>https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=record&amp;id=BUF00002452 https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=record&amp;id=BUF00002723 https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=record&amp;id=BUF00002552 https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=record&amp;id=BUF00000904 https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=termlist&amp;query=norsk https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=termlist&amp;query=wrd=rundskriv https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=termlist&amp;query=Barnevernet.+Til+barnets+beste https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=search&amp;query=Barn&amp;start=2&amp;num=5 https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=record&amp;id=BUF00002452 https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=search&amp;query=wrd=rundskriv&amp;start=1&amp;num=5</p>","tags":["Ekstern","API","Reindex"]},{"location":"Bufdir.no/docs/Reindex/#sort","title":"Sort","text":"<p>https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=search&amp;query=barn&amp;num=20&amp;start=0&amp;sort=date:0 </p>","tags":["Ekstern","API","Reindex"]},{"location":"Bufdir.no/docs/Reindex/#links","title":"Links","text":"<p>https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=record&amp;id=BUF00000441</p>","tags":["Ekstern","API","Reindex"]},{"location":"Bufdir.no/docs/Reindex/#sdi-list","title":"SDI list","text":"<p>https://nbbf.reindex.net/BUF/rss/Api.php?Focus=ApiSDIList&amp;Type=Portal</p> <p>https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=record&amp;id=BUF00002452 https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=record&amp;id=BUF00002723 https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=record&amp;id=BUF00002552 https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=termlist&amp;query=norsk https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=termlist&amp;query=Barnevernet.+Til+barnets+beste https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=search&amp;query=Barn&amp;start=2&amp;num=5 https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=search&amp;query=lko=BUFDIR&amp;start=0&amp;num=50 https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=record&amp;id=BUF00002452 https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=termlist&amp;query=lko=BUFDIR&amp;start=0&amp;num=50 https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=search&amp;query=ettervern&amp;start=25&amp;num=25</p> <p>https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=termlist&amp;query=atferd https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=search&amp;query=atferd%20and%20lem=%22Barn%22&amp;num=25&amp;start=0&amp;sort=date:0</p>","tags":["Ekstern","API","Reindex"]},{"location":"Bufdir.no/docs/Reindex/#sort_1","title":"Sort","text":"<p>https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=search&amp;query=barn&amp;num=20&amp;start=0&amp;sort=date:0 </p>","tags":["Ekstern","API","Reindex"]},{"location":"Bufdir.no/docs/Reindex/#links_1","title":"Links","text":"<p>https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=record&amp;id=BUF00000441</p>","tags":["Ekstern","API","Reindex"]},{"location":"Bufdir.no/docs/Reindex/#sdi-list_1","title":"SDI list","text":"<p>https://nbbf.reindex.net/BUF/rss/Api.php?Focus=ApiSDIList&amp;Type=Portal https://nbbf.reindex.net/BUF/rss/rxsearch.php?command=search&amp;query=fosterhjem+and+fo%3DBacke-Hansen%2C+Elisabeth+and+fo%3DMadsen%2C+Christian+and+fo%3DHvinden%2C+Bj%C3%B8rn+and+fo%3DHvinden%2C+Bj%C3%B8rn+and+fo%3DMadsen%2C+Christian+and+sp%3Dnob+and+fo%3DBacke-Hansen%2C+Elisabeth&amp;num=25&amp;start=0</p>","tags":["Ekstern","API","Reindex"]},{"location":"Bufdir.no/docs/Reindex/#publication-list","title":"Publication list","text":"<p>/BUF/rss/rxsearch.php?command=search&amp;query=lko=BUFDIR&amp;num=10&amp;start=0&amp;sort=date:0 </p>","tags":["Ekstern","API","Reindex"]},{"location":"Bufdir.no/docs/Reindex/#status","title":"Status","text":"","tags":["Ekstern","API","Reindex"]},{"location":"Bufdir.no/docs/Reindex/#news-list","title":"News list","text":"<p>Nyhedsliste /BUF/rss/Api.php?Focus=newslistall</p>","tags":["Ekstern","API","Reindex"]},{"location":"Bufdir.no/docs/best-practices/","title":"Best Practices","text":""},{"location":"Bufdir.no/docs/best-practices/#backend","title":"Backend","text":""},{"location":"Bufdir.no/docs/best-practices/#auth","title":"Auth","text":"<p>If we need to expose something to a specific group of internal people, that should not be accessible to the public, we use episervers AD groups, and expose the content to logged in users in episerver UI. Feedback results are an example of how this can be done.</p> <p>This makes sure that exposing the content to the public unintentionally is harder, and also makes it easier to know who has access to the content, and retract the access at a later time if necessary.</p>"},{"location":"Bufdir.no/docs/frontend-localization-next/","title":"Frontend localization next","text":"<p>All Localization are loaded in the layout file  - /src/app/layout.tsx</p> <p>Language are loaded from Optimizely through the getGlobalData function and are merged with the json files in the i18n folder</p> <p>the merged result are available on the globalThis object both on server and on client</p> <p> component are responsible to make all the localization available for client-components</p> <p>Localizations &amp; language</p> <p>globalThis.localization     .cms = Language from Optimizely     .system = localization from system.json     .validation = localization from validation.json     .accessibility = localization from accessibility.json     .generic = localization from generic.json</p> <p>All localization are typed in src\\shared\\optimizely\\globalTypes.ts</p> <p>example usage:</p> <p>const globalResources = globalThis?.localization?.cms?.Shared?.GlobalResources;</p> <p>return (     <p>{globalResources?.HasExpired}</p> )</p>"},{"location":"Bufdir.no/docs/frontend-testing/","title":"Frontend Testing","text":""},{"location":"Bufdir.no/docs/frontend-testing/#how-we-test-our-frontend-code","title":"How we test our frontend code","text":"<p>We use Vitest and React Testing Library to write unit tests for Typescript functions and component tests for React components.</p> <p>We prioritize writing components tests over unit tests in the frontend.</p> <p>We use msw to mock api in tests (see test example with msw in use under 'Useful Links' below).</p> <p>We do not find snapshot tests useful.</p>"},{"location":"Bufdir.no/docs/frontend-testing/#notes","title":"Notes","text":""},{"location":"Bufdir.no/docs/frontend-testing/#google-recaptcha","title":"Google ReCaptcha","text":"<p>Mock google recaptcha api like this:</p> <pre><code>window.grecaptcha = {\n  ready: (callback) =&gt; callback(),\n  execute: vi.fn(() =&gt; Promise.resolve({ data: {} })),\n};\n</code></pre>"},{"location":"Bufdir.no/docs/frontend-testing/#useful-links","title":"Useful Links","text":"<ul> <li>React Testing Library   test example.</li> <li>Vite docs</li> <li>About unit tests, component test and snapshot tests   here.</li> </ul>"},{"location":"Bufdir.no/docs/razor-to-next/","title":"Converting from Razor to Next.js","text":""},{"location":"Bufdir.no/docs/razor-to-next/#introduction","title":"Introduction","text":"<p>This guide will help you convert your existing Razor views which are consuming the Optimizely model directly (or via view models) to Next.js page templates consuming Optimizely Content Delivery API (CD API for short).</p>"},{"location":"Bufdir.no/docs/razor-to-next/#tldr","title":"TL;DR","text":"<ol> <li>Create a new page template in <code>src/NextJs/src/page-templates</code> with the same    name as the Razor view, but drop the naming convention with \"Page\" and    \"Index\" suffixes.</li> <li>Find usages of the Razor view in the CMS GUI and query the CD API for the    content of the page.</li> <li>Add data, css classes, and epi data attributes to the page template.</li> <li>Register the page template in the <code>TemplateWrapper</code> component.</li> <li>Check that you have all the content by refreshing the page in the browser and    comparing the new and the old page.</li> </ol>"},{"location":"Bufdir.no/docs/razor-to-next/#razor-view","title":"Razor view","text":"<p>Let's start with the front page of fosterhjem. The Razor view is at the of writing located at <code>src/Site/Features/Shared/ServiceStart/ServiceStartIndex.cshtml</code>. It's a view that renders the page title, a hero image, a main intro and the main content of the page.</p> <pre><code>@using EPiServer.Web.Mvc.Html\n@inject EPiServer.Web.IContextModeResolver ContextModeResolver\n\n@model RoutableContentViewModel&lt;BufdirWeb.Site.Features.Shared.ServiceStart.ServiceStartPage&gt;\n&lt;div class=\"bd-service-start-index\"&gt;\n    &lt;h1 class=\"bl-size-1 bl-text-center bl-p-b-5\"&gt;@Html.PropertyFor(x =&gt; x.CurrentContent.Heading)&lt;/h1&gt;\n    @if (Model.CurrentContent.HeroHeading.IsVisible())\n    {\n        &lt;div class=\"bl-p-b-7\"&gt;\n            @Html.PropertyFor(x =&gt; x.CurrentContent.HeroHeading)\n        &lt;/div&gt;\n    }\n    &lt;div class=\"bl-container bl-container--medium\"&gt;\n        @if (!string.IsNullOrWhiteSpace(Model.CurrentContent.MainIntro) || ContextModeResolver.CurrentMode == EPiServer.Web.ContextMode.Edit)\n        {\n            &lt;div class=\"bl-size-3 bl-p-b-7\"&gt;\n                @Html.PropertyFor(m =&gt; m.CurrentContent.MainIntro)\n            &lt;/div&gt;\n        }\n        &lt;div class=\"bl-p-b-6\"&gt;\n            &lt;div class=\"bl-grid bl-grid--big-row-gap\"&gt;\n                @Html.PropertyFor(x =&gt; x.CurrentContent.MainContent)\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"Bufdir.no/docs/razor-to-next/#nextjs-page-template","title":"Next.js page template","text":"<p>All Next.js page templates that represents an Optimizely view should be located in the <code>src/NextJs/src/page-templates</code> folder, and must be registered in the <code>TemplateWrapper</code> component. The <code>TemplateWrapper</code> component will pass the page data and the global translations.</p> <p>Let's make the Next.js page template for the fosterhjem front page (ServiceStart).</p>"},{"location":"Bufdir.no/docs/razor-to-next/#get-started","title":"Get Started","text":"<p>First we need to create a new file in the <code>src/NextJs/src/page-templates</code>. We call it the same as in the Razor view, <code>ServiceStart.tsx</code>, but drop the naming convention \"Index\" indicating that this is a page template, as we know this by the parent folder name (\"page-templates\").</p> <p>We start by defining the component and adding the prop type <code>PageTemplateProps</code> like this:</p> <pre><code>const ServiceStart: FC&lt;PageTemplateProps&gt; = async ({ data, translations }) =&gt; {\n  return &lt;div className=\"bd-service-start-page\"&gt;&lt;/div&gt;;\n};\n\nexport default ServiceStart;\n</code></pre> <p>Note 1: we add a css class to the wrapping div, this is to make it easier to debug the page template in the browser (just as with other components).</p> <p>Note 2: there are, at the time of writing, two ways to get use the global translations in a page template. Either by using the custom i18next <code>useTranslations</code> hook, or by passing the <code>translations</code> prop. We will use the <code>translations</code> prop in this example.</p>"},{"location":"Bufdir.no/docs/razor-to-next/#add-data","title":"Add data","text":"<p>To see the Content Delivery API data for this page template, we need to go to the CMS GUI and find the usage of the page template. In this case, the page template is used by the fosterhjem front page, so we can use Postman to query Content Delivery API for the content of this page, on this url: <code>https://localhost:44320/api/episerver/v3.0/content?ContentUrl=/no/fosterhjem</code>.</p>"},{"location":"Bufdir.no/docs/razor-to-next/#add-the-page-title","title":"Add the page title","text":"<p>The page title is located in the <code>data</code> prop, and can be accessed like this:</p> <pre><code>&lt;h1&gt;{data.name}&lt;/h1&gt;\n</code></pre>"},{"location":"Bufdir.no/docs/razor-to-next/#see-the-template-in-action","title":"See the template in action","text":"<p>To see the page template in action, we need to register it in the <code>TemplateWrapper</code> component. Open the <code>TemplateWrapper.tsx</code> file and import the page template:</p> <pre><code>import ServiceStart from './ServiceStart';\n</code></pre> <p>then add the template to the switch statement:</p> <pre><code>switch (pageTemplate) {\n  case 'ServiceStartPage':\n      TemplateComponent = ServiceStart;\n      break;\n</code></pre> <p>Note: the case value must be the same as the contentType name in the CD API response.</p> <p>and now we can navigate to the fosterhjem front page and see the page template on <code>https://localhost:3000/no/fosterhjem</code>.</p>"},{"location":"Bufdir.no/docs/razor-to-next/#on-page-editing","title":"On page editing","text":"<p>Let's add the styling from the Razor view, and also add the <code>data-epi-edit</code> attribute to tell Optimizely which property this is, so it can be edited in the preview mode.</p> <pre><code>&lt;h1 data-epi-edit=\"Heading\" className=\"bl-size-1 bl-text-center bl-p-b-5\"&gt;\n  {data.name}\n&lt;/h1&gt;\n</code></pre> <p>You can test this by going to the page in preview mode in the CMS and hover over the title, and click the edit icon.</p>"},{"location":"Bufdir.no/docs/razor-to-next/#add-the-hero","title":"Add the hero","text":"<p>The hero is a block and we can see that this block is implementing the Hero react component.</p> <p>All blocks should have a mapper function to map the block data from CDAPI to the component props. The mapper function is located in <code>src/NextJs/src/shared/optimizely/blockToComponentMappers.ts</code>. Let's add the mapper function for the hero block:</p> <pre><code>const heroData = mapBlock.toHero(data?.heroHeading);\n</code></pre> <p>and then we can add the hero component:</p> <pre><code>{\n  heroData?.values?.imageUrl &amp;&amp; (\n    &lt;div className=\"bl-p-b-7\"&gt;\n      &lt;Hero\n        title={heroData.values.title}\n        ingress={heroData.values.ingress}\n        isSecondary={heroData.values.isSecondary}\n        imageUrl={heroData.values.imageUrl}\n        imageAltText={heroData.values.imageAltText}\n        imageCredit={heroData.values.imageCredit}\n        linkText={heroData.values.linkText}\n        linkUrl={heroData.values.linkUrl}\n      /&gt;\n    &lt;/div&gt;\n  );\n}\n</code></pre> <p>Note: we add the <code>data-epi-edit</code> attribute to the wrapping div, this is to make it easier to edit the hero block in the CMS.</p>"},{"location":"Bufdir.no/docs/razor-to-next/#add-the-main-intro","title":"Add the main intro","text":"<p>The main intro is a string property, and we can access it like this:</p> <pre><code>{\n  data?.mainIntro?.value &amp;&amp; (\n    &lt;div className=\"bl-size-4 bl-p-b-7\"&gt;{data.mainIntro.value}&lt;/div&gt;\n  );\n}\n</code></pre>"},{"location":"Bufdir.no/docs/razor-to-next/#add-the-main-content-working-with-content-areas-and-rich-text-with-block-support","title":"Add the main content / working with content areas and rich text with block support","text":"<p>The main content is a content area. Content areas and rich text properties with block support should be passed to the <code>Xhtmlstring</code> components block prop. The <code>Xhtmlstring</code> component will render the blocks in the content area or rich text property.</p> <pre><code>{\n  data?.mainContent?.value &amp;&amp; (\n    &lt;div className=\"bl-p-b-6\"&gt;\n      &lt;div className=\"bl-grid bl-grid--big-row-gap\"&gt;\n        &lt;Xhtmlstring blocks={data.mainContent.value} /&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  );\n}\n</code></pre> <p>Note: until we release the Next.js project, you will see blocks that are not yet supported by the <code>Xhtmlstring</code> component by the blocks name in large blue letters on the page. It will also be logged to the terminal. Make a task to add support for the block in the <code>Xhtmlstring</code> component, and add it to the sprint board.</p>"},{"location":"Bufdir.no/docs/razor-to-next/#the-finished-result","title":"The finished result","text":"<pre><code>import React, { FC, Suspense } from 'react';\nimport Xhtmlstring from '../components/xhtmlstring/Xhtmlstring';\nimport Hero from '../components/hero/Hero';\nimport mapBlock from '@/shared/optimizely/blockToComponentMappers';\nimport { PageTemplateProps } from './PageTemplateProps';\n\n/**\n * This is a the page template ServiceStart\n *\n * example url: https://localhost:3000/fosterhjem\n */\nconst ServiceStart: FC&lt;PageTemplateProps&gt; = async ({ data }) =&gt; {\n  const heroData = mapBlock.toHero(data?.heroHeading);\n  const mainContentBlocks = data?.mainContent?.value;\n\n  return (\n    &lt;div className=\"bd-service-start-page\"&gt;\n      &lt;div&gt;\n        &lt;h1\n          data-epi-edit=\"Heading\"\n          className=\"bl-size-1 bl-text-center bl-p-b-5\"\n        &gt;\n          {data.name}\n        &lt;/h1&gt;\n        {heroData?.values?.imageUrl &amp;&amp; (\n          &lt;div data-epi-edit=\"HeroHeading\" className=\"bl-p-b-7\"&gt;\n            &lt;Hero\n              title={heroData.values.title}\n              ingress={heroData.values.ingress}\n              isSecondary={heroData.values.isSecondary}\n              imageUrl={heroData.values.imageUrl}\n              imageAltText={heroData.values.imageAltText}\n              imageCredit={heroData.values.imageCredit}\n              linkText={heroData.values.linkText}\n              linkUrl={heroData.values.linkUrl}\n            /&gt;\n          &lt;/div&gt;\n        )}\n        &lt;div\n          data-epi-edit=\"MainIntro\"\n          className=\"bl-container bl-container--medium\"\n        &gt;\n          {data?.mainIntro?.value &amp;&amp; (\n            &lt;div className=\"bl-m-b-4 bl-size-4\"&gt;{data.mainIntro?.value}&lt;/div&gt;\n          )}\n\n          {mainContentBlocks &amp;&amp; (\n            &lt;div className=\"bl-p-b-6\"&gt;\n              &lt;div\n                data-epi-edit=\"MainContent\"\n                className=\"bl-grid bl-grid--big-row-gap bl-p-b-7\"\n              &gt;\n                &lt;Xhtmlstring blocks={mainContentBlocks} /&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n          )}\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  );\n};\n\nexport default ServiceStart;\n</code></pre> <p>Note: we add an example url in the comments to make it easier to debug the template. We do not include /no/ in the url, because this will be removed in before releasing to production.</p>"},{"location":"Bufdir.no/docs/razor-to-next/#final-notes","title":"Final notes","text":""},{"location":"Bufdir.no/docs/razor-to-next/#check-that-you-have-all-the-content","title":"Check that you have all the content","text":"<p>You can check that you have all the content from the Razor view by comparing the two pages in the browser. The equivalent Razor view will have the same parameters as the Next.js page template, but on port 44320 instead of 3000.</p>"},{"location":"Bufdir.no/docs/razor-to-next/#what-to-do-about-missing-data","title":"What to do about missing data","text":"<p>This was a fairly straight forward page template to implement, but you will find that some page templates are more complex.</p> <p>Issues you might run into:</p> <ul> <li>Some blocks are not yet supported by the <code>Xhtmlstring</code> component. Make a task   to add support for the block in the <code>Xhtmlstring</code> component, and add it to the   sprint board.</li> <li>Some Razor views have view models and controllers that get data from other   sources than the Optimizely page model, that is not mapped to the CD API. Make   a task to add support for the data in the CD API, and add it to the sprint   board.</li> <li>Example: NewsListPageIndex.cshtml lists all it's children pages. In this     case you can use the <code>getPageChildrenData</code> helper function to get the     children pages from the CD API.</li> <li>Example 2: LocalOfficeArticleIndex.cshtml includes assets from the media     archive. In this case you can use the <code>getCommonPageData</code> helper function to     get the common data associated with that page, but the endpoint might need     to be implemented for the specific page type in the backend.</li> </ul>"},{"location":"Bufdir.no/docs/release/","title":"Releasing and deploy this project","text":""},{"location":"Bufdir.no/docs/release/#make-release-branch","title":"Make release branch","text":"<p>Start by pulling the latest changes from the develop and main branch and then run from develop: <code>git flow release start</code> followed by the new version number for the project (for example 1.2.3).</p> <p>The version should follow semver.</p>"},{"location":"Bufdir.no/docs/release/#update-version-number","title":"Update version number","text":"<p>Update version number in ./src/NextJs/package.json to the same as you chose for the project when creating the release branch (for example 1.2.3).</p> <p>package.json example:</p> <pre><code>{\n  \"name\": \"projectname\",\n  \"version\": \"1.2.3\",\n</code></pre> <p>and then run <code>npm i</code> and <code>npm run build</code> in /src/NextJs.</p>"},{"location":"Bufdir.no/docs/release/#update-the-changelog","title":"Update the changelog","text":"<p>Open ./changelog.md and document the latest release following the pattern of previous releases.</p> <p>Remember to change the headline to reflect the actual release number and date, remove unused headlines (i.e. if there are no lines under the headline \"Removed\" for this release).</p> <p>Copy/paste the template for the changelog from the bottom of the changelog and put it on top of the changelog to prepare for adding unreleased changes after this release.</p>"},{"location":"Bufdir.no/docs/release/#deploy-to-qa","title":"Deploy to QA","text":"<p>The lead tester will prompt for QA releases. If we need to release without being prompted by the lead tester, then make sure to notice him/her.</p> <p>Commit the changes and make the commit message be the same as the version of the project (for example 1.2.3).</p> <p>Run <code>git flow release publish</code> from the release branch to trigger a deploy to QA.</p>"},{"location":"Bufdir.no/docs/release/#deploy-to-prod","title":"Deploy to PROD","text":"<p>The lead tester will prompt for a PROD release when they are finished approving the release on the QA environment.</p> <p>Pull latest changes on the current release branch (in case someone else has made \"patches\" on the active release branch), the <code>main</code> branch, and the <code>develop</code> branch (to avoid merge conflicts) and then run <code>git flow release finish</code>.</p> <p>If you are prompted by the terminal to write in a file, write the same as the commit message (version of the project, for example 1.2.3), save and close.</p> <p><code>git flow release finish</code> will:</p> <ul> <li>merge the release branch back into 'master'</li> <li>tag the release with its name</li> <li>back-merge the release into 'develop'</li> <li>remove the release branch</li> </ul> <p>Now push the changes from the develop branch with <code>git push</code> (this will trigger a deploy to DevTest).</p> <p>Then checkout the <code>main</code> branch and push the changes and the tags with <code>git push &amp;&amp; git push --tags</code> to trigger a deploy to PROD.</p> <p>The release will first go to a \"staging slot\", which will have to be \"swapped\" for the \"prod slot\" in the azure prod webapp settings, after the staging slots url has been tested by a tester and approved for swapping.</p>"},{"location":"Bufdir.no/src/NextJs/","title":"Index","text":"<p>This is a Next.js project bootstrapped with <code>create-next-app</code>.</p>"},{"location":"Bufdir.no/src/NextJs/#getting-started","title":"Getting Started","text":"<p>First, start up the dotnet backend server:</p> <pre><code>dotnet run\n</code></pre> <p>Copy the .env.example to .env.local and ask a teammember for the AZURE_AD_CLIENT_SECRET</p> <p>Then, run the Next.js development server:</p> <pre><code>npm run dev\n</code></pre> <p>Open https://localhost:3000 with your browser to see the result.</p>"},{"location":"Bufdir.no/src/NextJs/#structure","title":"Structure","text":"<ul> <li><code>src/app</code>: We put pages and layout components here.</li> <li><code>src/app/layout.tsx</code>: defines the layout of the app with the header, feedback   component and footer.</li> <li><code>src/app/[[routeParams]]/page.tsx</code>: takes all params that is not defined in   other named pages and passes to different page templates based on content type   defined in the Content Delivery API.</li> <li><code>src/page-templates</code>: defines page templates for different content types.</li> <li><code>public</code>: Static assets like images are served from here.</li> </ul>"},{"location":"Bufdir.no/src/NextJs/#converting-razor-pages-to-nextjs-page-templates","title":"Converting razor pages to Next.js page templates","text":"<p>Go to the razor-to-next document to read about the conversion process.</p>"},{"location":"Bufdir.no/src/NextJs/#learn-more-about-nextjs","title":"Learn More About Next.js","text":"<p>To learn more about Next.js, take a look at the following resources:</p> <ul> <li>Next.js Documentation - learn about Next.js   features and API.</li> <li>Learn Next.js - an interactive Next.js tutorial.</li> </ul> <p>You can check out the Next.js GitHub repository - your feedback and contributions are welcome!</p>"},{"location":"Bufdir.no/src/NextJs/src/generic-types-ts/Readme/","title":"We are using three kinds type definition","text":""},{"location":"Bufdir.no/src/NextJs/src/generic-types-ts/Readme/#each-kind-will-have-post-fix-at-the-end-of-the-file-name-ie-postal-search-modal-props-were-props-is-the-file-type-postfix","title":"Each kind will have post-fix at the end of the file name i.e postal-search-modal-props, were props is the file type postfix.","text":"Postfix kinds props generic api-data Type definition React components Multiple usage and heritage across ts-files api responses i.e (GET, POST etc)"},{"location":"Bufdir.no/src/Site/Frontend/src/generic-types-ts/Readme/","title":"We are using three kinds type definition","text":""},{"location":"Bufdir.no/src/Site/Frontend/src/generic-types-ts/Readme/#each-kind-will-have-post-fix-at-the-end-of-the-file-name-ie-postal-search-modal-props-were-props-is-the-file-type-postfix","title":"Each kind will have post-fix at the end of the file name i.e postal-search-modal-props, were props is the file type postfix.","text":"Postfix kinds props generic api-data Type definition React components Multiple usage and heritage across ts-files api responses i.e (GET, POST etc)"},{"location":"DSM/BM/","title":"DSM Api","text":"<p>Web api for filing mediation requests to family services. Uses azure service bus to read mediation questionnaire and familievern offices, and for sending questionnaire responses to fado/famo.</p>"},{"location":"DSM/BM/#overview","title":"Overview","text":"<p>The solution consists of 7 projects:</p> <ul> <li>Abstractions</li> <li>Api</li> <li>Application</li> <li>Data</li> <li>Notification</li> <li>ServiceBus</li> <li>Tests</li> </ul>"},{"location":"DSM/BM/#abstractions","title":"Abstractions","text":"<p><code>Abstractions</code> contains all the <code>dtos</code> used by <code>Api</code> (and <code>Application</code>). We currently use the same objects for both application and data transfer, but that could change in the future if the need arises.</p> <p><code>Abstractions</code> is a separate project as we reuse some of the objects in the <code>FSA</code> project to enrich the questionnaire from the client with data from the population register. Thus, <code>Abstractions</code> has a separate build pipeline to build a <code>Bufdir.DsmApi.Abstractions</code> package and deploy it to the library artifacts feed.</p>"},{"location":"DSM/BM/#api","title":"Api","text":"<p><code>Api</code> hosts the application itself and contains the web api controllers for searching family services offices, retrieving differentiation questionnaire and filing new mediation requests/amend mediation cases with answers from parent2.</p>"},{"location":"DSM/BM/#application","title":"Application","text":"<p><code>Application</code> contains application layer logic such as validators, services for reading/writing the data used by the controllers via the <code>Data</code> layer etc. It also contains some mapping code not (yet) moved to AutoMapper. The services for reading/writing family services and corresponding zipcodes are so simple that they are handled by a common generic <code>SimpleDataService</code>.</p>"},{"location":"DSM/BM/#data","title":"Data","text":"<p><code>Data</code> is the persistence layer that uses ef core to store the various entities in a SQL server database.</p>"},{"location":"DSM/BM/#notification","title":"Notification","text":"<p><code>Notification</code> contains the code used to publish messages to the notifications api when mediation cases are filed or amended.</p>"},{"location":"DSM/BM/#servicebus","title":"ServiceBus","text":"<p><code>ServiceBus</code> uses MassTransit to read family services offices, zip codes and differentiation questionnaires and write mediation cases to azure service bus.</p>"},{"location":"DSM/BM/#tests","title":"Tests","text":"<p><sup>^</sup><sup>^</sup>^^ The title is self-explanatory <code>\u00f2_\u00d3</code></p>"},{"location":"DSM/BM/#getting-started","title":"Getting Started","text":"<p>To set up a local environment, you need an instance of SQL Server - you can for example download Sql Server developer edition, or use LocalDB if you have that available.</p> <p>For MacOS you probably need to use docker to start an sql database.</p> <p><code>appsettings.json</code> has a local db connection string which must be updated accordingly.</p> <p>In development when starting the API The schema and database should automatically be created, the api provides an endpoint to seed the database with some hard coded questions, this endpoint can for now be called from the swagger page.</p>"},{"location":"DSM/BM/#key-vault","title":"Key vault","text":"<p><code>appsettings.Development.json</code> is configured to use the <code>kv-dsmapi-devtest</code> keyvault on <code>Fantomet</code>. As long as you have a valid <code>az login</code> token, it should be able to read the app registration etc from it.</p>"},{"location":"DSM/BM/#devtest-environment","title":"Devtest environment","text":"<p>Each merge to the <code>develop</code> branch gets deployed to dmsapi-devtest. Its corresponding app registration in Fantomet azure ad is <code>DsmApi dev</code>, with a corresponding <code>dsmapi dev client</code> with access granted to the api. Oauth2 token endpoint is <code>https://login.microsoftonline.com/1fb73343-87a4-4ba0-88b8-4452ec55d7f5/oauth2/v2.0/token</code> and scope is <code>api://2d37a1a0-467e-4ac2-a4f6-7a9714211ef4/.default</code> Client id and secret for the client for testing has been added to the key vault. Retrieve using</p> <pre><code>az keyvault secret show --name \"testclient-id\" --vault-name \"kv-dsmapi-devtest\" --query \"value\"\naz keyvault secret show --name \"testclient-secret\" --vault-name \"kv-dsmapi-devtest\" --query \"value\"\n</code></pre>"},{"location":"DSM/BM/#user-id-validation","title":"User id validation","text":"<p>In addition to the client credentials flow protecting the web api, we needed a tamper-proof way of passing the clients person number. We do this by adding a <code>x-bufdir-personno</code> http header containing a salted hash of the current users person number in the FSA backend. We can then verify that the person number in the header matches the person number in the json body, and that the header was added by the FSA using a secret preshared salt.</p>"},{"location":"DSM/BM/#database","title":"Database","text":"<p>The version of EF core tools are defined in the manifest file <code>dotnet-tools.json</code>. To get the correct version of EF core tools execute the CLI command <code>dotnet restore</code>. When changing the database model a new migration file can be created by executing the CLI command; <code>dotnet ef migrations add &lt;ChangeDescription&gt;</code>.</p>"},{"location":"DSM/BM/BM/","title":"Begj\u00e6r Mekling (BM)","text":""},{"location":"DSM/BM/dsm-api/","title":"DSM Api","text":"<p>Web api for filing mediation requests to family services. Uses azure service bus to read mediation questionnaire and familievern offices, and for sending questionnaire responses to fado/famo.</p>"},{"location":"DSM/BM/dsm-api/#overview","title":"Overview","text":"<p>The solution consists of 7 projects:</p> <ul> <li>Abstractions</li> <li>Api</li> <li>Application</li> <li>Data</li> <li>Notification</li> <li>ServiceBus</li> <li>Tests</li> </ul>"},{"location":"DSM/BM/dsm-api/#abstractions","title":"Abstractions","text":"<p><code>Abstractions</code> contains all the <code>dtos</code> used by <code>Api</code> (and <code>Application</code>). We currently use the same objects for both application and data transfer, but that could change in the future if the need arises.</p> <p><code>Abstractions</code> is a separate project as we reuse some of the objects in the <code>FSA</code> project to enrich the questionnaire from the client with data from the population register. Thus, <code>Abstractions</code> has a separate build pipeline to build a <code>Bufdir.DsmApi.Abstractions</code> package and deploy it to the library artifacts feed.</p>"},{"location":"DSM/BM/dsm-api/#api","title":"Api","text":"<p><code>Api</code> hosts the application itself and contains the web api controllers for searching family services offices, retrieving differentiation questionnaire and filing new mediation requests/amend mediation cases with answers from parent2.</p>"},{"location":"DSM/BM/dsm-api/#application","title":"Application","text":"<p><code>Application</code> contains application layer logic such as validators, services for reading/writing the data used by the controllers via the <code>Data</code> layer etc. It also contains some mapping code not (yet) moved to AutoMapper. The services for reading/writing family services and corresponding zipcodes are so simple that they are handled by a common generic <code>SimpleDataService</code>.</p>"},{"location":"DSM/BM/dsm-api/#data","title":"Data","text":"<p><code>Data</code> is the persistence layer that uses ef core to store the various entities in a SQL server database.</p>"},{"location":"DSM/BM/dsm-api/#notification","title":"Notification","text":"<p><code>Notification</code> contains the code used to publish messages to the notifications api when mediation cases are filed or amended.</p>"},{"location":"DSM/BM/dsm-api/#servicebus","title":"ServiceBus","text":"<p><code>ServiceBus</code> uses MassTransit to read family services offices, zip codes and differentiation questionnaires and write mediation cases to azure service bus.</p>"},{"location":"DSM/BM/dsm-api/#tests","title":"Tests","text":"<p><sup>^</sup><sup>^</sup>^^ The title is self-explanatory <code>\u00f2_\u00d3</code></p>"},{"location":"DSM/BM/dsm-api/#getting-started","title":"Getting Started","text":"<p><code>appsettings.json</code> has a local db connection string. To set up a local environment, download Sql Server developer edition and install the <code>ef core</code> tools. Create a <code>dsmapi</code> database (for instance using SSMS) and run <code>dotnet ef database update</code> in the <code>Data</code> project directory to apply the database schema.</p>"},{"location":"DSM/BM/dsm-api/#key-vault","title":"Key vault","text":"<p><code>appsettings.Development.json</code> is configured to use the <code>kv-dsmapi-devtest</code> keyvault on <code>Fantomet</code>. As long as you have a valid <code>az login</code> token, it should be able to read the app registration etc from it.</p>"},{"location":"DSM/BM/dsm-api/#devtest-environment","title":"Devtest environment","text":"<p>Each merge to the <code>develop</code> branch gets deployed to dmsapi-devtest. Its corresponding app registration in Fantomet azure ad is <code>DsmApi dev</code>, with a corresponding <code>dsmapi dev client</code> with access granted to the api. Oauth2 token endpoint is <code>https://login.microsoftonline.com/1fb73343-87a4-4ba0-88b8-4452ec55d7f5/oauth2/v2.0/token</code> and scope is <code>api://2d37a1a0-467e-4ac2-a4f6-7a9714211ef4/.default</code> Client id and secret for the client for testing has been added to the key vault. Retrieve using</p> <pre><code>az keyvault secret show --name \"testclient-id\" --vault-name \"kv-dsmapi-devtest\" --query \"value\"\naz keyvault secret show --name \"testclient-secret\" --vault-name \"kv-dsmapi-devtest\" --query \"value\"\n</code></pre>"},{"location":"DSM/BM/dsm-api/#user-id-validation","title":"User id validation","text":"<p>In addition to the client credentials flow protecting the web api, we needed a tamper-proof way of passing the clients person number. We do this by adding a <code>x-bufdir-personno</code> http header containing a salted hash of the current users person number in the FSA backend. We can then verify that the person number in the header matches the person number in the json body, and that the header was added by the FSA using a secret preshared salt.</p>"},{"location":"DSM/BM/dsm-api/#database","title":"Database","text":"<p>The version of EF core tools are defined in the manifest file <code>dotnet-tools.json</code>. To get the correct version of EF core tools execute the CLI command <code>dotnet restore</code>. When changing the database model a new migration file can be created by executing the CLI command; <code>dotnet ef migrations add &lt;ChangeDescription&gt;</code>.</p>"},{"location":"DSM/FSA/FSA/","title":"Foreldresammarbeids avtalen (FSA)","text":""},{"location":"Statistikk/Statistikk/","title":"Statistikk","text":"","tags":["Strapi","React","C#","Skytjenester"]},{"location":"bufdir.no/","title":"Database:","text":"<ol> <li>dotnet tool restore</li> <li>dotnet ef database update -p .\\Infrastructure\\Infrastructure.csproj -s .\\Api\\Api.csproj</li> </ol>"},{"location":"bufdir.no/#keyvault","title":"KeyVault:","text":"<p>AzureKeyVaultEnabled = true/false AzureKeyVaultName = keyvaultnavn</p>"},{"location":"bufdir.no/#lokalt","title":"Lokalt:","text":"<p>Sett f\u00f8lgende enviroment-variabler - AZURE_CLIENT_ID\": , - AZURE_TENANT_ID\": , - AZURE_CLIENT_SECRET\":  <p>f.eks : setx AZURE_TENANT_ID \"1234-abc\"</p> <p>Du kan ogs\u00e5 skru av key-vault og bruke user-secrets isteden</p>"},{"location":"bufdir.no/#azure","title":"Azure:","text":"<p>Bruk KeyVault med managed identity</p>"},{"location":"bufdir.no/#andre-miljer","title":"Andre milj\u00f8er","text":"<p>Sett f\u00f8lgende enviroment-variabler - AZURE_CLIENT_ID\": , - AZURE_TENANT_ID\": , - AZURE_CLIENT_SECRET\":"},{"location":"bufdir.no/#cicd-with-nuke","title":"CI/CD with Nuke","text":"<p>Nuke is a .NET tool used in the repository pipeline for automate build, test and deployment processes.  It allows the pipeline logic to be debugged locally before deployment to Azure DevOps. The output from Nuke is a .yml file  that is executed by the pipeline where Nuke logic runs as an .NET console application.</p> <p>## Getting started  1. Install the Nuke .NET tool     <pre><code>dotnet tool install Nuke.GlobalTool --global\n</code></pre>  ## Run Nuke locally  Nuke provides developers with the ability to debug the pipeline on their local environment before deploying it to Azure DevOps.   It's important to note that certain targets/steps within the pipeline are protected against local executions.   This safeguard is in place to prevent deployments to environments that should only be updated through pipeline execution on Azure DevOps.</p> <p>When new targets are added or when specific Azure DevOps logic is modified, Nuke must be executed locally to regenerate the <code>azure-pipelines.yml</code> file.  This can be accomplished in several ways, for example, by running the following command from the root of the repository: <code>nuke --help</code>.</p> <p>To run the pipeline locally, you can initiate it by executing the following command from the repository's root: <code>nuke</code>.  When running it locally, secrets are retrieved from the encrypted file <code>parameters.local.json</code> rather than the pipeline itself.  You'll be prompted to enter a password for decrypting these secrets.</p> <p>Important Note: When invoking Nuke, the <code>azure-pipelines.yml</code> file is regenerated, which means any manual changes made to the file will be overwritten</p> <p>## Debugging  The pipeline logic can be debugged locally, just like any other .NET project.</p> <p>## Manual changes to azure-piplines.yml  When Nuke is executed locally, an azure-pipelines.yml file will be automatically generated. Since Nuke does not replace .yml files,   developers still need to relate to these files. This means that some logic may need to be added manually for the sake of effectiveness and visual clarity  in the pipeline.</p> <p>The following items have been added to the project's .yml file:  - <code>NuGetAuthenticate@1</code> task.  - Condition for running the <code>PublishImage</code> and <code>DeployImage</code> jobs. These conditions are not necessary for functional reasons but rather    for visualization in Azure DevOps to indicate weather the jobs has been executed or not.</p> <p>## Additional information  For more information about Nuke and its functionality, visit the official website: https://nuke.build/.</p>"},{"location":"bufdir.no/Fosterhjem/","title":"Fosterhjem docs","text":"<p>Test av doc overf\u00f8ring. Trigger overf\u00f8ring p\u00e5 save Tester. ppp test</p>"},{"location":"bufdir.no/Fosterhjem.API/","title":"Database:","text":"<ol> <li>dotnet tool restore</li> <li>dotnet ef database update -p .\\Infrastructure\\Infrastructure.csproj -s .\\Api\\Api.csproj</li> </ol>"},{"location":"bufdir.no/Fosterhjem.API/#keyvault","title":"KeyVault:","text":"<p>AzureKeyVaultEnabled = true/false AzureKeyVaultName = keyvaultnavn</p>"},{"location":"bufdir.no/Fosterhjem.API/#lokalt","title":"Lokalt:","text":"<p>Sett f\u00f8lgende enviroment-variabler - AZURE_CLIENT_ID\": , - AZURE_TENANT_ID\": , - AZURE_CLIENT_SECRET\":  <p>f.eks : setx AZURE_TENANT_ID \"1234-abc\"</p> <p>Du kan ogs\u00e5 skru av key-vault og bruke user-secrets isteden</p>"},{"location":"bufdir.no/Fosterhjem.API/#azure","title":"Azure:","text":"<p>Bruk KeyVault med managed identity</p>"},{"location":"bufdir.no/Fosterhjem.API/#andre-miljer","title":"Andre milj\u00f8er","text":"<p>Sett f\u00f8lgende enviroment-variabler - AZURE_CLIENT_ID\": , - AZURE_TENANT_ID\": , - AZURE_CLIENT_SECRET\":"},{"location":"bufdir.no/Fosterhjem.API/#cicd-with-nuke","title":"CI/CD with Nuke","text":"<p>Nuke is a .NET tool used in the repository pipeline for automate build, test and deployment processes.  It allows the pipeline logic to be debugged locally before deployment to Azure DevOps. The output from Nuke is a .yml file  that is executed by the pipeline where Nuke logic runs as an .NET console application.</p> <p>## Getting started  1. Install the Nuke .NET tool     <pre><code>dotnet tool install Nuke.GlobalTool --global\n</code></pre>  ## Run Nuke locally  Nuke provides developers with the ability to debug the pipeline on their local environment before deploying it to Azure DevOps.   It's important to note that certain targets/steps within the pipeline are protected against local executions.   This safeguard is in place to prevent deployments to environments that should only be updated through pipeline execution on Azure DevOps.</p> <p>When new targets are added or when specific Azure DevOps logic is modified, Nuke must be executed locally to regenerate the <code>azure-pipelines.yml</code> file.  This can be accomplished in several ways, for example, by running the following command from the root of the repository: <code>nuke --help</code>.</p> <p>To run the pipeline locally, you can initiate it by executing the following command from the repository's root: <code>nuke</code>.  When running it locally, secrets are retrieved from the encrypted file <code>parameters.local.json</code> rather than the pipeline itself.  You'll be prompted to enter a password for decrypting these secrets.</p> <p>Important Note: When invoking Nuke, the <code>azure-pipelines.yml</code> file is regenerated, which means any manual changes made to the file will be overwritten</p> <p>## Debugging  The pipeline logic can be debugged locally, just like any other .NET project.</p> <p>## Manual changes to azure-piplines.yml  When Nuke is executed locally, an azure-pipelines.yml file will be automatically generated. Since Nuke does not replace .yml files,   developers still need to relate to these files. This means that some logic may need to be added manually for the sake of effectiveness and visual clarity  in the pipeline.</p> <p>The following items have been added to the project's .yml file:  - <code>NuGetAuthenticate@1</code> task.  - Condition for running the <code>PublishImage</code> and <code>DeployImage</code> jobs. These conditions are not necessary for functional reasons but rather    for visualization in Azure DevOps to indicate weather the jobs has been executed or not.</p> <p>## Additional information  For more information about Nuke and its functionality, visit the official website: https://nuke.build/.</p>"},{"location":"bufdir.no/Fosterhjem.API/Fosterhjem/","title":"Fosterhjem docs","text":"<p>Test av doc overf\u00f8ring. Trigger overf\u00f8ring p\u00e5 save Tester. ppp test</p>"},{"location":"noeharskjedd/noeharskjedd/","title":"test","text":""},{"location":"noeharskjedd/readme/","title":"test","text":""}]}